version: 2

models:

  # Contratos DBT

  ## Bronze
  - name: contratos
    description: >
      Tabela com informações sobre contratos, incluindo detalhes como o valor do contrato, a data de início e término, e o status do contrato.
      Esta tabela é fundamental para entender a execução e o cumprimento dos contratos firmados.
      A tabela é atualizada diariamente e contém dados de contratos firmados pelo IPEA.
      A tabela realiza validações e limpezas dos dados extraídos do ComprasGov, incluindo formatação adequada de valores numéricos,
      remoção de caracteres especiais em CPF/CNPJ e normalização de datas.
    meta:
      tags:
        - bronze
    columns:
      - name: id
        description: >
          Identificador único do contrato, utilizado para referenciar o contrato em outras tabelas e análises.
      - name: receita_despesa
        description: >
          Indica se o contrato é de receita ou despesa.
      - name: numero
        description: >
          Número do contrato no sistema ComprasGov.
      - name: fornecedor_tipo
        description: >
          Tipo do fornecedor (PF, PJ, IDGENERICO para empresas do exterior).
      - name: fornecedor_nome
        description: >
          Nome do fornecedor contratado.
      - name: tipo
        description: >
          Tipo de contrato ( Contrato, Empenho, Termo de Compromisso, etc.).
      - name: situacao
        description: >
          Situação atual do contrato ( Ativo, Inativo).
      - name: categoria
        description: >
          Categoria do contrato ( Informática, Serviços, Mão de Obra, Serviços de Engenharia, etc.).
      - name: objeto
        description: >
          Descrição do objeto contratado.
      - name: codigo_modalidade
        description: >
          Código que identifica a modalidade do contrato.
      - name: modalidade
        description: >
          Modalidade do contrato ( Pregão, Dispensa, Inexigibilidade, etc.).
      - name: num_parcelas
        description: >
          Número de parcelas para pagamento do contrato.
      - name: valor_inicial
        description: >
          Valor inicial do contrato, formatado como numérico.
      - name: valor_global
        description: >
          Valor total do contrato após eventuais aditivos, formatado como numérico.
      - name: valor_parcela
        description: >
          Valor de cada parcela do contrato, formatado como numérico.
      - name: valor_acumulado
        description: >
          Valor acumulado já realizado do contrato, formatado como numérico.
      - name: fornecedor_cnpj_cpf_idgener
        description: >
          CNPJ, CPF ou identificador genérico do fornecedor, com formatação padronizada para remoção de caracteres especiais.
      - name: processo
        description: >
          Número do processo administrativo relacionado ao contrato, formatado para remover caracteres especiais.
      - name: data_assinatura
        description: >
          Data em que o contrato foi assinado, validada e convertida para formato de data padrão.
      - name: data_publicacao
        description: >
          Data de publicação do contrato no Diário Oficial, validada e convertida para formato de data padrão.
      - name: vigencia_inicio
        description: >
          Data de início da vigência do contrato, validada e convertida para formato de data padrão.
      - name: vigencia_fim
        description: >
          Data de término da vigência do contrato, validada e convertida para formato de data padrão.
    data_tests: 
      - row_count_match:
          source_table: compras_gov.contratos
          target_table: contratos.contratos
      - verificacao_tipagem:
          nome_tabela: 'contratos.contratos'
          nome_coluna: 'num_parcelas'
          tipo_esperado: 'integer'
      - verificacao_tipagem:
          nome_tabela: 'contratos.contratos'
          nome_coluna: 'valor_inicial'
          tipo_esperado: 'numeric'
      - verificacao_tipagem:
          nome_tabela: 'contratos.contratos'
          nome_coluna: 'valor_global'
          tipo_esperado: 'numeric'
      - verificacao_tipagem:
          nome_tabela: 'contratos.contratos'
          nome_coluna: 'valor_parcela'
          tipo_esperado: 'numeric'
      - verificacao_tipagem:
          nome_tabela: 'contratos.contratos'
          nome_coluna: 'valor_acumulado'
          tipo_esperado: 'numeric'
      - verificacao_tipagem:
          nome_tabela: 'contratos.contratos'
          nome_coluna: 'data_assinatura'
          tipo_esperado: 'date'
      - verificacao_tipagem:
          nome_tabela: 'contratos.contratos'
          nome_coluna: 'data_publicacao'
          tipo_esperado: 'date'
      - verificacao_tipagem:
          nome_tabela: 'contratos.contratos'
          nome_coluna: 'data_proposta_comercial'
          tipo_esperado: 'date'
      - verificacao_tipagem:
          nome_tabela: 'contratos.contratos'
          nome_coluna: 'vigencia_inicio'
          tipo_esperado: 'date'
      - verificacao_tipagem:
          nome_tabela: 'contratos.contratos'
          nome_coluna: 'vigencia_fim'
          tipo_esperado: 'date'

  - name: cronogramas
    description: >
      Essa tabela contém informações sobre as despesas mensais programadas para cada contrato.
      Os dados são extraídos da tabela cronograma do ComprasGov, com valores formatados adequadamente.
      Apresenta o planejamento financeiro do contrato distribuído em parcelas mensais.
    meta:
      tags:
        - bronze
    columns:
      - name: id
        description: >
          Identificador único do cronograma.
      - name: contrato_id
        description: >
          Identificador do contrato relacionado ao cronograma.
      - name: tipo
        description: >
          Tipo de cada item do cronograma.
      - name: mesref
        description: >
          Mês de referência do cronograma.
      - name: anoref
        description: >
          Ano de referência do cronograma.
      - name: valor
        description: >
          Valor programado para o mês e ano de referência, formatado como numérico.
      - name: vencimento
        description: >
          Data de vencimento da parcela do cronograma.
    data_tests: 
      - verificacao_tipagem:
          nome_tabela: 'contratos.cronogramas'
          nome_coluna: 'id'
          tipo_esperado: 'integer'
      - verificacao_tipagem:
          nome_tabela: 'contratos.cronogramas'
          nome_coluna: 'contrato_id'
          tipo_esperado: 'integer'
      - verificacao_tipagem:
          nome_tabela: 'contratos.cronogramas'
          nome_coluna: 'mesref'
          tipo_esperado: 'integer'
      - verificacao_tipagem:
          nome_tabela: 'contratos.cronogramas'
          nome_coluna: 'anoref'
          tipo_esperado: 'integer'
      - verificacao_tipagem:
          nome_tabela: 'contratos.cronogramas'
          nome_coluna: 'valor'
          tipo_esperado: 'numeric'
      - verificacao_tipagem:
          nome_tabela: 'contratos.cronogramas'
          nome_coluna: 'vencimento'
          tipo_esperado: 'date'

  - name: faturas
    description: >
      Essa tabela contém informações sobre as faturas emitidas mensalmente de cada contrato.
      Os dados são extraídos da tabela faturas do ComprasGov com formatação adequada de valores numéricos e datas.
      A tabela inclui um processamento adicional para extrair informações dos empenhos a partir do campo JSON dados_empenho.
    meta:
      tags:
        - bronze
    columns:
      - name: id
        description: >
          Identificador único da fatura.
      - name: contrato_id
        description: >
          Identificador do contrato relacionado à fatura.
      - name: numero
        description: >
          Número da fatura emitida pelo fornecedor.
      - name: emissao
        description: >
          Data de emissão da fatura pelo fornecedor.
      - name: prazo
        description: >
          Data limite para pagamento da fatura.
      - name: vencimento
        description: >
          Data de vencimento da fatura.
      - name: valor
        description: >
          Valor bruto da fatura, formatado como numérico.
      - name: juros
        description: >
          Valor de juros aplicados à fatura, formatado como numérico.
      - name: multa
        description: >
          Valor de multa aplicada à fatura, formatado como numérico.
      - name: glosa
        description: >
          Valor de glosa aplicada à fatura, formatado como numérico.
      - name: valorliquido
        description: >
          Valor líquido da fatura após subtrações de glosas, multas ou juros, formatado como numérico.
      - name: situacao
        description: >
          Status atual da fatura (Pago ou Pendente).
      - name: mesref
        description: >
          Mês de referência da fatura.
      - name: anoref
        description: >
          Ano de referência da fatura.
      - name: id_empenho
        description: >
          Identificador do empenho extraído do campo JSON dados_empenho.
      - name: numero_empenho
        description: >
          Número do empenho relacionado à fatura, extraído do campo JSON dados_empenho e convertido para maiúsculas.
      - name: valor_empenho
        description: >
          Valor do empenho extraído do campo JSON dados_empenho.
    data_tests:
      - verificacao_tipagem:
          nome_tabela: 'contratos.faturas'
          nome_coluna: 'id'
          tipo_esperado: 'integer'
      - verificacao_tipagem:
          nome_tabela: 'contratos.faturas'
          nome_coluna: 'contrato_id'
          tipo_esperado: 'integer'
      - verificacao_tipagem:
          nome_tabela: 'contratos.faturas'
          nome_coluna: 'emissao'
          tipo_esperado: 'date'
      - verificacao_tipagem:
          nome_tabela: 'contratos.faturas'
          nome_coluna: 'prazo'
          tipo_esperado: 'date'
      - verificacao_tipagem:
          nome_tabela: 'contratos.faturas'
          nome_coluna: 'vencimento'
          tipo_esperado: 'date'
      - verificacao_tipagem:
          nome_tabela: 'contratos.faturas'
          nome_coluna: 'valor'
          tipo_esperado: 'numeric'
      - verificacao_tipagem:
          nome_tabela: 'contratos.faturas'
          nome_coluna: 'juros'
          tipo_esperado: 'numeric'
      - verificacao_tipagem:
          nome_tabela: 'contratos.faturas'
          nome_coluna: 'multa'
          tipo_esperado: 'numeric'
      - verificacao_tipagem:
          nome_tabela: 'contratos.faturas'
          nome_coluna: 'glosa'
          tipo_esperado: 'numeric'
      - verificacao_tipagem:
          nome_tabela: 'contratos.faturas'
          nome_coluna: 'valorliquido'
          tipo_esperado: 'numeric'
      - verificacao_tipagem:
          nome_tabela: 'contratos.faturas'
          nome_coluna: 'protocolo'
          tipo_esperado: 'date'
      - verificacao_tipagem:
          nome_tabela: 'contratos.faturas'
          nome_coluna: 'ateste'
          tipo_esperado: 'date'
      - verificacao_tipagem:
          nome_tabela: 'contratos.faturas'
          nome_coluna: 'mesref'
          tipo_esperado: 'integer'
      - verificacao_tipagem:
          nome_tabela: 'contratos.faturas'
          nome_coluna: 'anoref'
          tipo_esperado: 'integer'

  - name: empenhos
    description: >
      Essa tabela contém informações sobre os empenhos de cada contrato extraídos do ComprasGov.
      Os dados são formatados adequadamente para garantir consistência nos tipos numéricos e de data.
      Registra os compromissos de pagamento assumidos pela administração para cada contrato.
    meta:
      tags:
        - bronze
    columns:
      - name: id
        description: >
          Identificador único do empenho no ComprasGov.
      - name: contrato_id
        description: >
          Identificador do contrato relacionado ao empenho.
      - name: nota_empenho
        description: >
          Número da nota de empenho registrada no sistema.
      - name: credor
        description: >
          Nome ou razão social do credor do empenho.
      - name: credor_obj_cnpj_cpf_idgener
        description: >
          CNPJ, CPF ou identificador genérico do credor do empenho.
      - name: empenhado
        description: >
          Valor total empenhado, formatado como numérico.
      - name: aliquidar
        description: >
          Valor a liquidar do empenho, formatado como numérico.
      - name: liquidado
        description: >
          Valor já liquidado do empenho, formatado como numérico.
      - name: pago
        description: >
          Valor já pago do empenho, formatado como numérico.
      - name: rpinscrito
        description: >
          Valor inscrito em restos a pagar, formatado como numérico.
      - name: rpaliquidar
        description: >
          Valor inscrito em restos a pagar a liquidar, formatado como numérico.
      - name: rpliquidado
        description: >
          Valor inscrito em restos a pagar já liquidado, formatado como numérico.
      - name: rppago
        description: >
          Valor inscrito em restos a pagar já pago, formatado como numérico.
      - name: data_emissao
        description: >
          Data de emissão do empenho, validada e convertida para formato de data padrão.
    data_tests: 
      - row_count_match:
          source_table: compras_gov.empenhos
          target_table: contratos.empenhos
      - verificacao_tipagem:
          nome_tabela: 'contratos.empenhos'
          nome_coluna: 'empenhado'
          tipo_esperado: 'numeric'
      - verificacao_tipagem:
          nome_tabela: 'contratos.empenhos'
          nome_coluna: 'aliquidar'
          tipo_esperado: 'numeric'
      - verificacao_tipagem:
          nome_tabela: 'contratos.empenhos'
          nome_coluna: 'liquidado'
          tipo_esperado: 'numeric'
      - verificacao_tipagem:
          nome_tabela: 'contratos.empenhos'
          nome_coluna: 'pago'
          tipo_esperado: 'numeric'
      - verificacao_tipagem:
          nome_tabela: 'contratos.empenhos'
          nome_coluna: 'rpinscrito'
          tipo_esperado: 'numeric'
      - verificacao_tipagem:
          nome_tabela: 'contratos.empenhos'
          nome_coluna: 'rpaliquidar'
          tipo_esperado: 'numeric'
      - verificacao_tipagem:
          nome_tabela: 'contratos.empenhos'
          nome_coluna: 'rpliquidado'
          tipo_esperado: 'numeric'
      - verificacao_tipagem:
          nome_tabela: 'contratos.empenhos'
          nome_coluna: 'rppago'
          tipo_esperado: 'numeric'
      - verificacao_tipagem:
          nome_tabela: 'contratos.empenhos'
          nome_coluna: 'data_emissao'
          tipo_esperado: 'date'

  - name: empenhos_tesouro
    description: >
      Essa tabela contém informações sobre movimentação financeira dos empenhos extraídos do SIAFI.
      Contém dados de empenhos do Tesouro Nacional com formatação de valores financeiros através da macro parse_financial_value.
      Apresenta valores para as diferentes etapas da execução orçamentária (empenho, liquidação, pagamento).
    meta:
      tags:
        - bronze
    columns:
      - name: emissao_mes
        description: >
          Mês de emissão do empenho.
      - name: emissao_dia
        description: >
          Data específica de emissão do empenho.
      - name: ne_ccor
        description: >
          Número completo da nota de empenho no SIAFI.
      - name: ne_num_processo
        description: >
          Número do processo relacionado ao empenho, com formatação para remover caracteres especiais.
      - name: ne_info_complementar
        description: >
          Informações complementares sobre o empenho.
      - name: ne_ccor_favorecido
        description: >
          CNPJ ou CPF do favorecido, formatado em caixa alta.
      - name: ne_ccor_ano_emissao
        description: >
          Ano de emissão do empenho, filtrado para incluir apenas empenhos a partir do ano 2000.
      - name: despesas_empenhadas
        description: >
          Valor das despesas empenhadas, formatado como numérico.
      - name: despesas_liquidadas
        description: >
          Valor das despesas liquidadas, formatado como numérico.
      - name: despesas_pagas
        description: >
          Valor das despesas pagas, formatado como numérico.
      - name: restos_a_pagar_inscritos
        description: >
          Valor dos restos a pagar inscritos, formatado como numérico.
      - name: restos_a_pagar_pagos
        description: >
          Valor dos restos a pagar pagos, formatado como numérico.
    data_tests:
      - verificacao_tipagem:
          nome_tabela: 'contratos.empenhos_tesouro'
          nome_coluna: 'ne_ccor_ano_emissao'
          tipo_esperado: 'integer'
      - verificacao_tipagem:
          nome_tabela: 'contratos.empenhos_tesouro'
          nome_coluna: 'despesas_empenhadas'
          tipo_esperado: 'numeric'
      - verificacao_tipagem:
          nome_tabela: 'contratos.empenhos_tesouro'
          nome_coluna: 'despesas_liquidadas'
          tipo_esperado: 'numeric'
      - verificacao_tipagem:
          nome_tabela: 'contratos.empenhos_tesouro'
          nome_coluna: 'despesas_pagas'
          tipo_esperado: 'numeric'
      - verificacao_tipagem:
          nome_tabela: 'contratos.empenhos_tesouro'
          nome_coluna: 'restos_a_pagar_inscritos'
          tipo_esperado: 'numeric'
      - verificacao_tipagem:
          nome_tabela: 'contratos.empenhos_tesouro'
          nome_coluna: 'restos_a_pagar_pagos'
          tipo_esperado: 'numeric'

  - name: estagios
    description: >
      Essa tabela contém informações sobre os eventos de cada empenho discriminados por mês.
      Extrai dados da tabela estagios_tesouro do SIAFI com formatação e padronização para facilitar análises.
      Trata especificamente valores monetários com parênteses, convertendo-os para números negativos.
      Apresenta os diferentes estágios da despesa (empenho, liquidação, pagamento) ao longo do tempo.
    meta:
      tags:
        - bronze
    columns:
      - name: ne_ccor
        description: >
          Número completo da nota de empenho no SIAFI.
      - name: ne_informacao_complementar
        description: >
          Informações complementares sobre o empenho.
      - name: doc_observacao
        description: >
          Observações adicionais registradas no documento.
      - name: ne_ccor_favorecido
        description: >
          CNPJ ou CPF do favorecido do empenho.
      - name: mes_lancamento
        description: >
          Mês em que o lançamento foi registrado no SIAFI.
      - name: ne_num_processo
        description: >
          Número do processo relacionado ao empenho, formatado para remover caracteres especiais.
      - name: natureza_despesa
        description: >
          Código da natureza de despesa, convertido para integer quando possível.
      - name: natureza_despesa_detalhada
        description: >
          Código detalhado da natureza de despesa, convertido para integer quando possível.
      - name: ano_lancamento
        description: >
          Ano em que o lançamento foi registrado no SIAFI, convertido para integer quando possível.
      - name: ne_ccor_ano_emissao
        description: >
          Ano de emissão do empenho, convertido para integer quando possível.
      - name: despesas_empenhadas_controle_empenho_saldo_moeda_origem
        description: >
          Saldo das despesas empenhadas em moeda de origem, formatado como numérico.
      - name: despesas_empenhadas_controle_empenho_movim_liquido_moeda_origem
        description: >
          Movimento líquido das despesas empenhadas em moeda de origem, formatado como numérico.
      - name: despesas_liquidadas_controle_empenho_saldo_moeda_origem
        description: >
          Saldo das despesas liquidadas em moeda de origem, formatado como numérico.
      - name: despesas_liquidadas_controle_empenho_movim_liquido_moeda_origem
        description: >
          Movimento líquido das despesas liquidadas em moeda de origem, formatado como numérico.
      - name: despesas_pagas_controle_empenho_saldo_moeda_origem
        description: >
          Saldo das despesas pagas em moeda de origem, formatado como numérico.
      - name: despesas_pagas_controle_empenho_movim_liquido_moeda_origem
        description: >
          Movimento líquido das despesas pagas em moeda de origem, formatado como numérico.
    data_tests:
      - verificacao_tipagem:
          nome_tabela: 'contratos.estagios'
          nome_coluna: 'natureza_despesa'
          tipo_esperado: 'integer'
      - verificacao_tipagem:
          nome_tabela: 'contratos.estagios'
          nome_coluna: 'natureza_despesa_detalhada'
          tipo_esperado: 'integer'
      - verificacao_tipagem:
          nome_tabela: 'contratos.estagios'
          nome_coluna: 'ano_lancamento'
          tipo_esperado: 'integer'
      - verificacao_tipagem:
          nome_tabela: 'contratos.estagios'
          nome_coluna: 'ne_ccor_ano_emissao'
          tipo_esperado: 'integer'
      - verificacao_tipagem:
          nome_tabela: 'contratos.estagios'
          nome_coluna: 'despesas_empenhadas_controle_empenho_saldo_moeda_origem'
          tipo_esperado: 'numeric'
      - verificacao_tipagem:
          nome_tabela: 'contratos.estagios'
          nome_coluna: 'despesas_empenhadas_controle_empenho_movim_liquido_moeda_origem'
          tipo_esperado: 'numeric'
      - verificacao_tipagem:
          nome_tabela: 'contratos.estagios'
          nome_coluna: 'despesas_liquidadas_controle_empenho_saldo_moeda_origem'
          tipo_esperado: 'numeric'
      - verificacao_tipagem:
          nome_tabela: 'contratos.estagios'
          nome_coluna: 'despesas_liquidadas_controle_empenho_movim_liquido_moeda_origem'
          tipo_esperado: 'numeric'
      - verificacao_tipagem:
          nome_tabela: 'contratos.estagios'
          nome_coluna: 'despesas_pagas_controle_empenho_saldo_moeda_origem'
          tipo_esperado: 'numeric'
      - verificacao_tipagem:
          nome_tabela: 'contratos.estagios'
          nome_coluna: 'despesas_pagas_controle_empenho_movim_liquido_moeda_origem'
          tipo_esperado: 'numeric'

  ## Silver
  - name: contratos_empenhos
    description: >
      Essa tabela combina as informações de movimentação financeira dos empenhos com os ids de contrato do IPEA.
      Realiza uma complexa estratégia de join entre os contratos e empenhos do tesouro, tentando várias abordagens
      para relacionar os dados do SIAFI com os contratos do ComprasGov usando: 
      1) número de empenho e CNPJ/CPF, 2) número de processo, 3) CNPJ/CPF único, e 4) informação complementar.
    meta:
      tags:
        - silver
    columns:
      - name: contrato_id
        description: >
          Identificador único do contrato relacionado ao empenho.
      - name: ne_transformed
        description: >
          Número da nota de empenho padronizado para facilitar joins entre diferentes fontes.
      - name: ne_ccor
        description: >
          Número completo da nota de empenho no SIAFI.
      - name: ne_info_complementar
        description: >
          Informações complementares sobre o empenho no SIAFI.
      - name: ne_num_processo
        description: >
          Número do processo administrativo relacionado ao empenho, formatado para remover caracteres especiais.
      - name: ne_ccor_descricao
        description: >
          Descrição da nota de empenho conforme registrado no SIAFI.
      - name: doc_observacao
        description: >
          Observações registradas no documento do empenho.
      - name: natureza_despesa
        description: >
          Código da natureza da despesa do empenho.
      - name: natureza_despesa_descricao
        description: >
          Descrição da natureza da despesa do empenho.
      - name: ne_ccor_favorecido
        description: >
          CNPJ ou CPF do favorecido do empenho.
      - name: ne_ccor_ano_emissao
        description: >
          Ano de emissão do empenho.
      - name: despesas_empenhadas
        description: >
          Valor total das despesas empenhadas para o contrato.
      - name: despesas_liquidadas
        description: >
          Valor total das despesas liquidadas para o contrato.
      - name: despesas_pagas
        description: >
          Valor total das despesas pagas para o contrato.

  - name: contratos_estagios
    description: >
      Essa tabela combina as informações de movimentação financeira dos empenhos com os ids de contrato do IPEA mensalmente.
      Utiliza uma estratégia de join em cascata, tentando correlacionar os estágios das despesas do SIAFI com os 
      contratos do ComprasGov através de várias combinações de chaves, incluindo número de empenho, CNPJ/CPF, número 
      de processo e informações complementares.
    meta:
      tags:
        - silver
    columns:
      - name: contrato_id
        description: >
          Identificador único do contrato relacionado aos estágios.
      - name: mes_lancamento
        description: >
          Mês em que o estágio da despesa foi registrado no SIAFI.
      - name: valor_empenhado
        description: >
          Valor empenhado no mês de referência para o contrato.
      - name: valor_liquidado
        description: >
          Valor liquidado no mês de referência para o contrato.
      - name: valor_pago
        description: >
          Valor pago no mês de referência para o contrato.

  - name: estagios_mensal
    description: >
      Essa tabela discrimina os valores empenhados, liquidados e pagos mensalmente extraídos do SIAFI para cada contrato.
      Transforma e agrega os dados da tabela empenhos_tesouro do SIAFI, padronizando formatos e consolidando valores 
      por número de empenho, mês e CNPJ/CPF.
    meta:
      tags:
        - silver
    columns:
      - name: ne
        description: >
          Número da nota de empenho no formato padronizado, extraído das 12 últimas posições do ne_ccor.
      - name: mes_lancamento
        description: >
          Mês de referência do lançamento, convertido para formato de data padrão.
      - name: cnpj_cpf
        description: >
          CNPJ ou CPF do favorecido do empenho.
      - name: info_complementar
        description: >
          Informação complementar extraída do ne_info_complementar.
      - name: num_processo
        description: >
          Número do processo administrativo relacionado ao empenho.
      - name: valor_empenhado
        description: >
          Valor total empenhado no mês e para o empenho específico.
      - name: valor_liquidado
        description: >
          Valor total liquidado no mês e para o empenho específico.
      - name: valor_pago
        description: >
          Valor total pago no mês e para o empenho específico.

  - name: contratos_faturas
    description: >
      Essa tabela integra informações detalhadas de faturas com dados dos contratos relacionados.
      Permite uma visão completa de cada fatura no contexto do seu contrato, incluindo dados como número de contrato,
      processo, objeto e fornecedor. Facilita a análise financeira das faturas em conjunto com seus respectivos contratos.
    meta:
      tags:
        - silver
    columns:
      - name: id
        description: >
          Identificador único da fatura.
      - name: contrato_id
        description: >
          Identificador do contrato relacionado à fatura.
      - name: numero_contrato
        description: >
          Número do contrato no sistema ComprasGov.
      - name: contrato_processo
        description: >
          Número do processo administrativo relacionado ao contrato.
      - name: fornecedor_cnpj_cpf_idgener
        description: >
          CNPJ, CPF ou identificador genérico do fornecedor do contrato.
      - name: objeto_contrato
        description: >
          Descrição do objeto contratado.
      - name: tipolistafatura_id
        description: >
          Identificador do tipo de lista de fatura.
      - name: justificativafatura_id
        description: >
          Identificador da justificativa da fatura, quando aplicável.
      - name: sfadrao_id
        description: >
          Identificador do padrão de sistema financeiro relacionado.
      - name: numero
        description: >
          Número da fatura emitida pelo fornecedor.
      - name: emissao
        description: >
          Data de emissão da fatura.
      - name: prazo
        description: >
          Data limite para pagamento da fatura.
      - name: vencimento
        description: >
          Data de vencimento da fatura.
      - name: valor
        description: >
          Valor bruto da fatura.
      - name: juros
        description: >
          Valor de juros aplicados à fatura.
      - name: multa
        description: >
          Valor de multa aplicada à fatura.
      - name: glosa
        description: >
          Valor de glosa aplicada à fatura.
      - name: valorliquido
        description: >
          Valor líquido da fatura após subtrações de glosas, multas ou juros.
      - name: processo
        description: >
          Número do processo administrativo específico da fatura, quando diferente do processo do contrato.
      - name: protocolo
        description: >
          Data de protocolo da fatura no sistema.
      - name: ateste
        description: >
          Data em que a fatura foi atestada, confirmando a entrega do produto ou serviço.
      - name: repactuacao
        description: >
          Indica se a fatura está relacionada a uma repactuação contratual.
      - name: infcomplementar
        description: >
          Informações complementares sobre a fatura.
      - name: mesref
        description: >
          Mês de referência da fatura.
      - name: anoref
        description: >
          Ano de referência da fatura.
      - name: situacao
        description: >
          Status atual da fatura (Pago ou Pendente).
      - name: chave_nfe
        description: >
          Chave da Nota Fiscal Eletrônica associada à fatura, quando disponível.
      - name: dados_referencia
        description: >
          Dados de referência adicionais da fatura, geralmente em formato JSON.
      - name: dados_item_faturado
        description: >
          Detalhamento dos itens faturados, geralmente em formato JSON.
      - name: dados_empenho
        description: >
          Informações sobre o empenho relacionado à fatura, em formato JSON.
      - name: id_empenho
        description: >
          Identificador do empenho extraído do campo JSON dados_empenho.
      - name: numero_empenho
        description: >
          Número do empenho relacionado à fatura.
      - name: valor_empenho
        description: >
          Valor do empenho relacionado à fatura.
      - name: subelemento
        description: >
          Código do subelemento de despesa relacionado à fatura.

  - name: cronogramas_faturas_mensal
    description: >
      Essa tabela discrimina os valores programados e faturados mensalmente pelo ComprasGov para cada contrato.
      Combina dados dos cronogramas com as faturas pagas e pendentes, agrupando por contrato e mês de referência,
      e calculando o saldo contratual disponível (diferença entre o valor programado e os valores faturados).
    meta:
      tags:
        - silver
    columns:
      - name: contrato_id
        description: >
          Identificador único do contrato.
      - name: mes_ref
        description: >
          Mês de referência dos valores programados e faturados.
      - name: valor_cronograma
        description: >
          Valor total programado para o mês de referência conforme cronograma do contrato.
      - name: valor_faturas_pagas
        description: >
          Valor total de faturas com status "Pago" no mês de referência.
      - name: valor_faturas_pendentes
        description: >
          Valor total de faturas com status "Pendente" no mês de referência.
      - name: saldo_contratual_disponivel
        description: >
          Diferença entre o valor programado no cronograma e a soma dos valores faturados (pagos e pendentes).



  ## Golds
  - name: contratos_resumo
    description: >
      Essa tabela contém um resumo dos contratos, informações contratuais como valor global e valor pago, 
      e situação atual, como em vigência ou pendente de baixa.
      Facilita a análise gerencial dos contratos com indicadores chave como status de pagamento, tipo de fornecedor,
      e identificação de contratos continuados (com vigência superior a dois anos e mais de uma parcela).
    meta:
      tags:
        - gold
    columns:
      - name: contrato_id
        description: >
          Identificador único do contrato.
      - name: fornecedor_cnpj_cpf
        description: >
          CNPJ ou CPF do fornecedor contratado, com formatação padronizada.
      - name: numero
        description: >
          Número do contrato no sistema ComprasGov.
      - name: categoria
        description: >
          Categoria do contrato ( Informática, Serviços, Mão de Obra).
      - name: modalidade
        description: >
          Modalidade de licitação utilizada na contratação.
      - name: tipo
        description: >
          Tipo de contrato ( Contrato, Empenho, Termo de Compromisso).
      - name: situacao
        description: >
          Situação atual do contrato (Ativo ou Inativo).
      - name: pendente_baixa
        description: >
          Indica se o contrato está pendente de baixa ('Sim' quando o valor pago for igual ao valor global, 'Não' caso contrário).
      - name: fornecedor_nome
        description: >
          Nome ou razão social do fornecedor contratado.
      - name: objeto
        description: >
          Descrição detalhada do objeto contratado.
      - name: valor_global
        description: >
          Valor total do contrato após eventuais aditivos.
      - name: despesas_pagas
        description: >
          Valor total já pago do contrato conforme registros do SIAFI.
      - name: vigencia_inicio
        description: >
          Data de início da vigência do contrato.
      - name: vigencia_fim
        description: >
          Data de término da vigência do contrato.
      - name: num_parcelas
        description: >
          Número de parcelas para pagamento do contrato.
      - name: fornecedor_tipo
        description: >
          Tipo do fornecedor, categorizado como 'Empresa do Exterior' para IDGENERICO.
      - name: Unidade
        description: >
          Unidade gestora responsável pelo contrato, no formato "código - nome_resumido".
      - name: continuado
        description: >
          Indica se o contrato é de prestação continuada ('Sim' quando a vigência for maior que 730 dias e tiver mais de uma parcela).

  - name: contratos_comparativo_mensal
    description: >
      Essa tabela contém um comparativo mensal dos contratos, discriminando 
      os valores empenhados, liquidados e pagos do SIAFI, 
      programados e faturados do ComprasGov.
      Permite a identificação de inconsistências entre os sistemas e o acompanhamento detalhado 
      da execução financeira mensal de cada contrato.
    meta:
      tags:
        - gold
    columns:
      - name: contrato_id
        description: >
          Identificador único do contrato.
      - name: mes_ref
        description: >
          Mês de referência da informação financeira, preenchido para todos os meses entre o início e fim do contrato.
      - name: comprasgov_valor_cronograma
        description: >
          Valor programado para o mês conforme cronograma registrado no ComprasGov.
      - name: comprasgov_valor_faturas
        description: >
          Soma dos valores das faturas (pagas e pendentes) no mês de referência conforme ComprasGov.
      - name: comprasgov_saldo_contratual_disponivel
        description: >
          Diferença entre o valor programado e o valor faturado no mês, indicando o saldo disponível.
      - name: siafi_valor_empenhado
        description: >
          Valor empenhado no mês de referência conforme registros do SIAFI.
      - name: siafi_valor_liquidado
        description: >
          Valor liquidado no mês de referência conforme registros do SIAFI.
      - name: siafi_valor_pago
        description: >
          Valor pago no mês de referência conforme registros do SIAFI.

  - name: contratos_somatorio
    description: >
      Essa tabela contém somatórios dos valores de cronograma, fatura, empenho, liquidação e pagamento para cada contrato.
      Facilita análises agregadas sobre a execução financeira total de cada contrato, com indicadores importantes 
      como o orçamento pendente de execução.
    meta:
      tags:
        - gold
    columns:
      - name: contrato_id
        description: >
          Identificador único do contrato.
      - name: total_cronograma
        description: >
          Soma de todos os valores programados no cronograma do contrato.
      - name: total_faturas
        description: >
          Soma de todos os valores faturados (pagos e pendentes) para o contrato.
      - name: total_saldo_disponivel
        description: >
          Diferença total entre valores programados e faturados, indicando o saldo contratual disponível.
      - name: orcamento_a_executar
        description: >
          Soma dos valores programados em meses onde ainda não houve faturamento, indicando o orçamento pendente de execução.
      - name: total_empenhado
        description: >
          Soma de todos os valores empenhados para o contrato segundo o SIAFI.
      - name: total_liquidado
        description: >
          Soma de todos os valores liquidados para o contrato segundo o SIAFI.
      - name: total_pago
        description: >
          Soma de todos os valores pagos para o contrato segundo o SIAFI.

  ## View
  - name: identificadores
    description: >
      Essa tabela contém os identificadores dos contratos, empenhos e faturas.
      Consolida os números de empenho encontrados em diferentes fontes (contratos, faturas, empenhos) 
      e padroniza informações como processo e CNPJ/CPF para facilitar joins entre as tabelas.
      Também cria um campo info_complementar que combina unidade gestora, modalidade e número de contrato/licitação.
    columns:
      - name: contrato_id
        description: >
          Identificador único do contrato.
      - name: categoria
        description: >
          Categoria do contrato ( Informática, Serviços, Mão de Obra).
      - name: processo
        description: >
          Número do processo administrativo do contrato, formatado para remover caracteres não numéricos.
      - name: cnpj_cpf
        description: >
          CNPJ ou CPF do fornecedor, formatado para remover caracteres especiais como barras, pontos e hífens.
      - name: info_complementar
        description: >
          Informação complementar construída a partir da unidade gestora, código de modalidade e número do contrato ou licitação.
      - name: ne
        description: >
          Número da nota de empenho relacionada ao contrato, combinando informações de contratos, empenhos e faturas.



  # Pessoas DBT

  # TED DBT
  - name: pf_tesouro
    description: >
      Esta tabela contém registros de Programações Financeiras extraídas do SIAFI, detalhando informações como tipo de programação, data de execução e valor. 
      A tabela é atualizada diariamente e reflete as autorizações de movimentação financeira no âmbito da execução orçamentária federal.
    meta:
      tags:
        - bronze
    columns:
    - name: emissao_mes
      description: >
        Mês de emissão da Programação Financeira.
    - name: emissao_dia
      description: >
        Dia de emissão da Programação Financeira.
    - name: ug_emitente
      description: >
        Código da Unidade Gestora responsável pela emissão da Programação Financeira.
    - name: ug_emitente_descricao
      description: >
        Nome ou descrição da Unidade Gestora emitente da Programação Financeira.
    - name: ug_favorecido
      description: >
        Código da Unidade Gestora favorecida pela Programação Financeira.
    - name: ug_favorecido_descricao
      description: >
        Nome ou descrição da Unidade Gestora favorecida pela Programação Financeira.
    - name: pf_evento
      description: >
        Código do evento contábil associado à Programação Financeira, representando a natureza da transação.
    - name: pf_evento_descricao
      description: >
        Descrição do evento contábil vinculado à Programação Financeira.
    - name: pf
      description: >
        Número identificador único da Programação Financeira.
    - name: pf_inscricao
      description: >
        Número de inscrição da Programação Financeira, utilizado para controle e acompanhamento.
    - name: pf_acao
      description: >
        Código da ação orçamentária associada à Programação Financeira.
    - name: pf_acao_descricao
      description: >
        Descrição da ação orçamentária vinculada à Programação Financeira.
    - name: pf_fonte_recursos
      description: >
        Código da fonte de recursos associada à Programação Financeira, indicando a origem dos recursos utilizados.
    - name: pf_fonte_recursos_descricao
      description: >
        Descrição textual da fonte de recursos vinculada à Programação Financeira.
    - name: pf_vinculacao_pagamento
      description: >
        Código da vinculação de pagamento associada à Programação Financeira.
    - name: pf_vinculacao_pagamento_descricao
      description: >
        Descrição da vinculação de pagamento vinculada à Programação Financeira.
    - name: pf_categoria_gasto
      description: >
        Código da categoria de gasto associada à Programação Financeira, conforme classificação orçamentária.
    - name: pf_recurso
      description: >
        Código do recurso associado à Programação Financeira.
    - name: pf_recurso_descricao
      description: >
        Descrição do recurso vinculado à Programação Financeira.
    - name: doc_observacao
      description: >
        Observações adicionais relacionadas à Programação Financeira.
    - name: pf_valor_linha
      description: >
        Valor monetário individual da linha da Programação Financeira.
    data_tests:
        - verificacao_tipagem:
            nome_tabela: 'ted.pf_tesouro'
            nome_coluna: 'emissao_dia'
            tipo_esperado: 'date'
        - verificacao_tipagem:
            nome_tabela: 'ted.pf_tesouro'
            nome_coluna: 'pf_valor_linha'
            tipo_esperado: 'numeric'

  - name: nc_tesouro
    description: >
      Esta tabela registra informações detalhadas sobre as Notas de Crédito emitidas no âmbito da execução orçamentária e financeira do governo federal. 
      As Notas de Crédito representam autorizações para a realização de despesas, sendo fundamentais para o controle e acompanhamento da execução orçamentária.
    meta:
      tags:
        - bronze
    columns:
    - name: emissao_mes
      description: >
        Mês de emissão da Nota de Crédito.
    - name: emissao_dia
      description: >
        Dia de emissão da Nota de Crédito.
    - name: nc
      description: >
        Número identificador único da Nota de Crédito.
    - name: nc_transferencia
      description: >
        Indicador de que a Nota de Crédito refere-se a uma transferência de recursos entre unidades gestoras.
    - name: nc_fonte_recursos
      description: >
        Código da fonte de recursos associada à Nota de Crédito, indicando a origem dos recursos utilizados.
    - name: nc_fonte_recursos_descricao
      description: >
        Descrição textual da fonte de recursos vinculada à Nota de Crédito.
    - name: ptres
      description: >
        Código do Plano Interno de Trabalho (PTRES) relacionado à Nota de Crédito, utilizado para detalhar a alocação dos recursos.
    - name: nc_evento
      description: >
        Código do evento contábil associado à Nota de Crédito, representando a natureza da transação.
    - name: nc_evento_descricao
      description: >
        Descrição do evento contábil vinculado à Nota de Crédito.
    - name: ug_responsavel
      description: >
        Código da Unidade Gestora responsável pela emissão da Nota de Crédito.
    - name: ug_responsavel_descricao
      description: >
        Nome ou descrição da Unidade Gestora responsável pela emissão da Nota de Crédito.
    - name: natureza_despesa
      description: >
        Código da natureza da despesa associada à Nota de Crédito, conforme classificação orçamentária.
    - name: natureza_despesa_detalhada
      description: >
        Descrição detalhada da natureza da despesa vinculada à Nota de Crédito.
    - name: plano_interno
      description: >
        Código do plano interno relacionado à Nota de Crédito, utilizado para controle interno da execução orçamentária.
    - name: plano_detalhado_descricao1
      description: >
        Primeira descrição detalhada do plano interno associado à Nota de Crédito.
    - name: plano_detalhado_descricao2
      description: >
        Segunda descrição detalhada do plano interno associado à Nota de Crédito.
    - name: favorecido_doc
      description: >
        Documento de identificação (CPF ou CNPJ) do favorecido pela Nota de Crédito.
    - name: favorecido_doc_descricao
      description: >
        Nome ou razão social do favorecido identificado na Nota de Crédito.
    - name: nc_valor_linha
      description: >
        Valor monetário individual da linha da Nota de Crédito.
    - name: movimento_liquido
      description: >
        Valor líquido do movimento financeiro associado à Nota de Crédito, após deduções ou acréscimos aplicáveis.

  - name: planos_acao
    description: >
      Esta tabela armazena informações detalhadas sobre os Planos de Ação vinculados a programas públicos.
      Ela consolida dados sobre as unidades envolvidas na execução, prazos de vigência, valores, justificativas,
      formas de execução e instrumentos utilizados. Serve como base para o acompanhamento, análise e auditoria 
      da implementação de ações públicas em diferentes formatos de execução.
    meta:
      tags:
        - bronze
    columns:
    - name: id_plano_acao
      description: >
        Identificador único do Plano de Ação.
    - name: id_programa
      description: >
        Identificador único do programa ao qual o Plano de Ação está vinculado.
    - name: sigla_unidade_descentralizada
      description: >
        Sigla da unidade descentralizada responsável pelo Plano de Ação.
    - name: unidade_descentralizada
      description: >
        Nome completo da unidade descentralizada responsável pelo Plano de Ação.
    - name: sigla_unidade_responsavel_execucao
      description: >
        Sigla da unidade responsável pela execução do Plano de Ação.
    - name: unidade_responsavel_execucao
      description: >
        Nome completo da unidade responsável pela execução do Plano de Ação.
    - name: vl_total_plano_acao
      description: >
        Valor total previsto para execução do Plano de Ação.
    - name: dt_inicio_vigencia
      description: >
        Data de início da vigência do Plano de Ação.
    - name: dt_fim_vigencia
      description: >
        Data final da vigência do Plano de Ação.
    - name: tx_objeto_plano_acao
      description: >
        Descrição do objeto do Plano de Ação, informando seu propósito e escopo.
    - name: tx_justificativa_plano_acao
      description: >
        Justificativa para a elaboração e execução do Plano de Ação.
    - name: in_forma_execucao_direta
      description: >
        Indicador booleano que sinaliza se a execução do plano ocorrerá de forma direta.
    - name: in_forma_execucao_particulares
      description: >
        Indicador booleano que sinaliza se a execução contará com a participação de particulares.
    - name: in_forma_execucao_descentralizada
      description: >
        Indicador booleano que sinaliza se a execução será realizada de forma descentralizada.
    - name: tx_situacao_plano_acao
      description: >
        Situação atual do Plano de Ação ( em elaboração, aprovado, em execução, concluído).
    - name: aa_ano_plano_acao
      description: >
        Ano de referência do Plano de Ação.
    - name: vl_beneficiario_especifico
      description: >
        Valor destinado especificamente a beneficiários definidos no Plano de Ação.
    - name: vl_chamamento_publico
      description: >
        Valor previsto para execução por meio de chamamento público.
    - name: sq_instrumento
      description: >
        Código sequencial do instrumento jurídico ou administrativo associado ao Plano de Ação.
    - name: aa_instrumento
      description: >
        Ano de referência do instrumento associado ao Plano de Ação.

  - name: nota_credito
    description: >
      Esta tabela contém informações sobre as Notas de Crédito emitidas no contexto dos Planos de Ação.
      As notas de crédito representam movimentações financeiras entre unidades gestoras e gestões, sendo 
      vinculadas a um Plano de Ação específico. A tabela registra dados como número, data de emissão, 
      códigos das unidades e gestões envolvidas, além de observações e situação da nota.
    meta:
      tags:
        - bronze
    columns:
    - name: id_nota
      description: >
        Identificador único da Nota de Crédito.
    - name: id_plano_acao
      description: >
        Identificador único do Plano de Ação ao qual a Nota de Crédito está vinculada.
    - name: tx_minuta_nota
      description: >
        Texto ou rascunho da minuta da Nota de Crédito.
    - name: tx_numero_nota
      description: >
        Número da Nota de Crédito, utilizado para controle e rastreabilidade.
    - name: dt_emissao_nota
      description: >
        Data e hora da emissão da Nota de Crédito.
    - name: cd_gestao_emitente_nota
      description: >
        Código da gestão pública que emitiu a Nota de Crédito.
    - name: cd_gestao_favorecida_nota
      description: >
        Código da gestão pública favorecida pela Nota de Crédito.
    - name: tx_situacao_nota
      description: >
        Situação atual da Nota de Crédito ( emitida, cancelada, aprovada).
    - name: cd_ug_emitente_nota
      description: >
        Código da Unidade Gestora que emitiu a Nota de Crédito.
    - name: cd_ug_favorecida_nota
      description: >
        Código da Unidade Gestora favorecida pela Nota de Crédito.
    - name: tx_observacao_nota
      description: >
        Observações adicionais registradas na Nota de Crédito, quando houver.

  - name: programacao_financeira
    description: >
      Esta tabela armazena os registros de Programações Financeiras vinculadas aos Planos de Ação. 
      A Programação Financeira representa o planejamento e execução da alocação de recursos entre unidades gestoras. 
      A tabela contempla informações como tipo, número, situação, unidade emitente e favorecida, 
      bem como observações e o documento hábil de recebimento.
    meta:
      tags:
        - bronze
    columns:
    - name: id_programacao
      description: >
        Identificador único da Programação Financeira.
    - name: id_plano_acao
      description: >
        Identificador único do Plano de Ação ao qual a Programação Financeira está vinculada.
    - name: tp_pf_tipo_programacao
      description: >
        Tipo de Programação Financeira ( ordinária, suplementar, especial).
    - name: tx_minuta_programacao
      description: >
        Minuta ou rascunho da Programação Financeira.
    - name: tx_numero_programacao
      description: >
        Número da Programação Financeira, utilizado para controle interno e rastreamento.
    - name: tx_situacao_programacao
      description: >
        Situação atual da Programação Financeira ( em análise, aprovada, cancelada).
    - name: tx_observacao_programacao
      description: >
        Observações complementares sobre a Programação Financeira, se houver.
    - name: ug_emitente_programacao
      description: >
        Código ou nome da Unidade Gestora que emitiu a Programação Financeira.
    - name: ug_favorecida_programacao
      description: >
        Código ou nome da Unidade Gestora favorecida pela Programação Financeira.
    - name: dh_recebimento_programacao
      description: >
        Data e hora do recebimento do documento hábil relacionado à Programação Financeira.

  - name: programas
    description: >
      Esta tabela contém os registros dos Programas institucionais, que orientam e organizam os Planos de Ação
      sob responsabilidade de diferentes unidades da administração pública. A tabela agrega dados como código, 
      nome, ano, situação, descrição, objetivos e informações relacionadas às autorizações e tipos de investimentos, 
      além de indicar critérios específicos como beneficiários e chamamentos públicos.
    meta:
      tags:
        - bronze
    columns:
    - name: id_programa
      description: >
        Identificador único do Programa.
    - name: tx_codigo_programa
      description: >
        Código atribuído ao Programa para fins de controle e identificação institucional.
    - name: aa_ano_programa
      description: >
        Ano de referência do Programa.
    - name: tx_situacao_programa
      description: >
        Situação atual do Programa ( ativo, encerrado, em elaboração).
    - name: tx_nome_programa
      description: >
        Nome oficial do Programa.
    - name: sigla_unidade_descentralizadora
      description: >
        Sigla da unidade responsável pela descentralização dos recursos do Programa.
    - name: unidade_descentralizadora
      description: >
        Nome completo da unidade descentralizadora responsável pelo Programa.
    - name: sigla_unidade_responsavel_acompanhamento
      description: >
        Sigla da unidade responsável pelo acompanhamento do Programa.
    - name: unidade_responsavel_acompanhamento
      description: >
        Nome completo da unidade responsável pelo acompanhamento do Programa.
    - name: tx_nome_institucional_programa
      description: >
        Nome institucional utilizado oficialmente para identificar o Programa.
    - name: tx_objetivo_programa
      description: >
        Objetivo principal do Programa, descrevendo seu propósito estratégico.
    - name: tx_descricao_programa
      description: >
        Descrição detalhada do Programa, abrangendo seu escopo e diretrizes.
    - name: in_grupo_investimento_obra
      description: >
        Indicador booleano que sinaliza se o Programa está vinculado a investimento em obras.
    - name: in_grupo_investimento_servico
      description: >
        Indicador booleano que sinaliza se o Programa está vinculado a investimento em serviços.
    - name: in_grupo_investimento_equipamento
      description: >
        Indicador booleano que sinaliza se o Programa está vinculado a investimento em equipamentos.
    - name: in_autoriza_subdescentralizacao_outro
      description: >
        Indicador que informa se o Programa autoriza subdescentralização para outras unidades.
    - name: in_autoriza_realizacao_despesas
      description: >
        Indicador que informa se o Programa autoriza a realização de despesas diretamente.
    - name: in_autoriza_execucao_creditos_descentralizada
      description: >
        Indicador que informa se o Programa autoriza a execução descentralizada de créditos.
    - name: in_beneficiario_especifico
      description: >
        Indicador booleano de existência de beneficiário específico no Programa.
    - name: dt_recebimento_plano_beneficiario_inicio
      description: >
        Data de início para recebimento do plano de beneficiário específico vinculado ao Programa.
    - name: dt_recebimento_plano_beneficiario_fim
      description: >
        Data final para recebimento do plano de beneficiário específico vinculado ao Programa.
    - name: in_chamamento_publico
      description: >
        Indicador booleano de execução via chamamento público no âmbito do Programa.
    - name: dt_recebimento_plano_chamamento_inicio
      description: >
        Data de início para recebimento do plano relacionado a chamamento público.
    - name: dt_recebimento_plano_chamamento_fim
      description: >
        Data final para recebimento do plano relacionado a chamamento público.

  - name: empenhos_plano_acao
    description: >
      Esta tabela estabelece a relação entre os empenhos registrados no SIAFI e os respectivos Planos de Ação, 
      permitindo o rastreamento das despesas públicas desde a origem do crédito até sua execução. 
    meta:
      tags:
        - silver
    columns:
    - name: ne
      description: >
        Número da Nota de Empenho, extraído dos 12 últimos dígitos do campo `ne_ccor`, representando o identificador do empenho no SIAFI.
    - name: num_transf
      description: >
        Número da transferência identificado na descrição da nota de empenho (`ne_ccor_descricao`), utilizado para vincular o empenho ao Plano de Ação correspondente.
    - name: nc
      description: >
        Código da Nota de Crédito associado ao empenho, extraído da descrição da nota de empenho e formatado conforme padrão estabelecido.
    - name: plano_acao
      description: >
        Identificador do Plano de Ação relacionado ao empenho, obtido a partir da correspondência com o número de transferência (`num_transf`).
    - name: ne_ccor
      description: >
        Campo original contendo o código completo da Nota de Empenho, utilizado como base para extração de identificadores.
    - name: ne_ccor_descricao
      description: >
        Descrição textual da Nota de Empenho, de onde são extraídos os números de transferência e códigos de nota de crédito para associação com os Planos de Ação.
    - name: demais_colunas
      description: >
        Outras colunas provenientes da tabela `empenhos_tesouro`, contendo informações adicionais sobre os empenhos, como data de emissão, valor, unidade gestora, entre outras.

  - name: nc_plano_acao
    description: >
      Esta tabela estabelece a relação entre as Notas de Crédito registradas no SIAFI e os respectivos Planos de Ação, 
      permitindo o rastreamento das movimentações financeiras desde a origem do crédito até sua aplicação. 
    meta:
      tags:
        - silver
    columns:
    - name: plano_acao
      description: >
        Identificador do Plano de Ação relacionado à Nota de Crédito, obtido a partir da correspondência com o número de transferência (`nc_transferencia`).
    - name: emissao_dia
      description: >
        Dia de emissão da Nota de Crédito.
    - name: num_transf
      description: >
        Número da transferência associado à Nota de Crédito, utilizado para vincular a movimentação financeira ao Plano de Ação correspondente.
    - name: nc
      description: >
        Código da Nota de Crédito, extraído dos 12 últimos dígitos do campo `nc`, representando o identificador da nota no SIAFI.
    - name: nc_fonte_recursos
      description: >
        Código da fonte de recursos associada à Nota de Crédito, indicando a origem dos recursos utilizados.
    - name: ptres
      description: >
        Código do Plano Interno de Trabalho (PTRES) vinculado à Nota de Crédito, representando a ação orçamentária correspondente.
    - name: ug_emitente
      description: >
        Código da Unidade Gestora emitente da Nota de Crédito, extraído dos 6 primeiros dígitos do campo `nc`.
    - name: nc_natureza_despesa
      description: >
        Código da natureza da despesa associada à Nota de Crédito, conforme classificação orçamentária.
    - name: nc_evento
      description: >
        Código do evento contábil associado à Nota de Crédito, representando a natureza da transação.
    - name: nc_evento_descr
      description: >
        Descrição do evento contábil vinculado à Nota de Crédito.
    - name: nc_valor
      description: >
        Valor monetário da Nota de Crédito, ajustado conforme o tipo de evento contábil.

  - name: pf_plano_acao
    description: >
      Esta tabela consolida as programações financeiras executadas no âmbito do SIAFI que estão relacionadas a Planos de Ação.
    meta:
      tags:
        - silver
    columns:
    - name: pf
      description: >
        Número identificador da Programação Financeira, conforme registrado no SIAFI.
    - name: num_transf
      description: >
        Número da transferência extraído do campo `pf_inscricao`, utilizado como chave alternativa para vinculação com Planos de Ação.
    - name: emissao_mes
      description: >
        Mês da emissão da Programação Financeira, no formato numérico (1 a 12).
    - name: emissao_dia
      description: >
        Dia da emissão da Programação Financeira, no formato numérico (1 a 31).
    - name: ug_emitente
      description: >
        Código da Unidade Gestora responsável pela emissão da Programação Financeira.
    - name: ug_favorecido
      description: >
        Código da Unidade Gestora favorecida pela Programação Financeira.
    - name: pf_evento
      description: >
        Código do evento contábil associado à Programação Financeira, que descreve o tipo de movimentação registrada.
    - name: pf_evento_descricao
      description: >
        Descrição do evento contábil da Programação Financeira, fornecendo contexto adicional sobre o tipo de operação realizada.
    - name: pf_acao
      description: >
        Código da ação orçamentária extraído da descrição da programação financeira, representando a finalidade da despesa.
    - name: pf_valor_linha
      description: >
        Valor programado para execução financeira, referente à linha específica da Programação Financeira.
    - name: plano_acao
      description: >
        Identificador do Plano de Ação associado à Programação Financeira, determinado por correspondência direta com o sistema TransfereGov ou via número de transferência.

  - name: ted_resumo_orcamentario
    description: >
      Tabela de consolidação orçamentária e financeira por Plano de Ação, baseada em informações de valores firmados, orçamentos recebidos e devolvidos, empenhos, despesas e transferências financeiras. 
      Os dados são integrados de diferentes fontes (notas de crédito, empenhos e programações financeiras) para fornecer um resumo abrangente da execução orçamentária e financeira de transferências intergovernamentais.
    meta:
      tags:
        - gold
    columns:
    - name: plano_acao
      description: >
        Identificador único do Plano de Ação associado aos registros orçamentários e financeiros.
    - name: num_transf
      description: >
        Número da transferência utilizado como chave de ligação entre diferentes fontes de dados.
    - name: sigla_unidade_descentralizada
      description: >
        Sigla da Unidade Descentralizada responsável pelo Plano de Ação.
    - name: ted_beneficiario_emitente
      description: >
        Identifica se a Unidade do Plano de Ação é a beneficiária ou a emitente dos recursos da TED (Transferência Voluntária). Valores possíveis: 'beneficiario', 'emitente' ou 'nao_indicado'.
    - name: valor_firmado
      description: >
        Valor total originalmente acordado no Plano de Ação como meta de transferência de recursos.
    - name: orcamento_recebido
      description: >
        Total de créditos orçamentários efetivamente recebidos por meio de Notas de Crédito.
    - name: orcamento_devolvido
      description: >
        Total de créditos orçamentários devolvidos, identificado por eventos contábeis específicos (ex.: 300301, 300307).
    - name: empenhado
      description: >
        Soma dos valores empenhados, ou seja, das despesas formalizadas no orçamento, excluindo anulações.
    - name: empenho_anulado
      description: >
        Total de valores de empenhos anulados, ou seja, revertidos após sua emissão.
    - name: despesas_pagas_exercicio
      description: >
        Total de despesas pagas no exercício corrente.
    - name: despesas_pagas_rap
      description: >
        Total de despesas pagas com recursos de Restos a Pagar.
    - name: restos_a_pagar
      description: >
        Valor total inscrito como Restos a Pagar, ou seja, despesas empenhadas e não pagas até o fim do exercício.
    - name: despesas_liquidada
      description: >
        Soma das despesas liquidadas, indicando bens ou serviços efetivamente entregues.
    - name: financeiro_recebido
      description: >
        Total de recursos financeiros recebidos via Programação Financeira (TED), considerando apenas ações classificadas como 'TRANSFERENCIA'.
    - name: financeiro_devolvido
      description: >
        Total de recursos financeiros devolvidos, com ações classificadas como 'DEVOLUCAO'.
    - name: financeiro_cancelado
      description: >
        Valor total de cancelamentos financeiros identificados na programação, com ação 'CANCELAMENTO'.

  - name: num_transf_n_plano_acao
    description: >
      View responsável por mapear o número de transferência (`num_transf`) ao respectivo Plano de Ação (`plano_acao`). 
      Utiliza dados de Notas de Crédito do TransfereGov e do SIAFI para realizar o cruzamento entre diferentes sistemas.
    columns:
    - name: num_transf
      description: >
        Número da transferência financeira obtido a partir dos registros do SIAFI (nota de crédito). Serve como chave para integrar informações entre diferentes fontes, como notas de crédito, programações financeiras e empenhos.
    - name: plano_acao
      description: >
        Identificador único do Plano de Ação, conforme registrado no TransfereGov. É atribuído ao `num_transf` com base no cruzamento entre a nota de crédito (NC) e a unidade gestora emitente (UG).

  # Bronze
  - name: afastamento_historico
    description: >
      Tabela bronze que armazena o histórico de afastamentos dos servidores.
      Contém informações detalhadas sobre cada período de afastamento, incluindo datas, tipo, e amparo legal.
      Os dados são limpos e padronizados a partir da fonte original.
    meta:
      tags:
        - bronze
    columns:
      - name: adiantamento_salario_ferias
        description: "Indica se houve adiantamento de salário durante as férias."
      - name: ano_exercicio
        description: "Ano de exercício a que o afastamento se refere."
      - name: dt_fim
        description: "Data de término do afastamento."
      - name: dt_fim_aquisicao
        description: "Data final do período aquisitivo de férias."
      - name: dt_ini
        description: "Data de início do afastamento."
      - name: dt_inicio_aquisicao
        description: "Data inicial do período aquisitivo de férias."
      - name: dt_inicio_ferias_interrompidas
        description: "Data de início de férias que foram interrompidas."
      - name: dias_restantes
        description: "Dias restantes de afastamento."
      - name: gratificacao_natalina
        description: "Indica se o afastamento está relacionado à gratificação natalina."
      - name: numero_parcela
        description: "Número da parcela do afastamento."
      - name: parcela_continuacao_interrupcao
        description: "Indica se a parcela é uma continuação ou interrupção."
      - name: parcelainterrompida
        description: "Indica se a parcela foi interrompida."
      - name: qtde_dias
        description: "Quantidade de dias do afastamento."
      - name: cpf
        description: "CPF do servidor."
      - name: cod_diploma_afastamento
        description: "Código do diploma legal do afastamento."
      - name: cod_ocorrencia
        description: "Código da ocorrência do afastamento."
      - name: dt_publicacao_afastamento
        description: "Data de publicação do afastamento."
      - name: desc_diploma_afastamento
        description: "Descrição do diploma legal do afastamento."
      - name: desc_ocorrencia
        description: "Descrição da ocorrência do afastamento."
      - name: numero_diploma_afastamento
        description: "Número do diploma legal do afastamento."


  - name: cargos_funcoes
    description: >
      Tabela bronze que representa as funções e cargos extraídos do sistema SIORG.
      Ela contém informações sobre o código e nome do cargo/função, nível hierárquico,
      categoria funcional, regras de autoridade, além de dados normativos (ato normativo)
      e as diversas denominações associadas a cada cargo/função.
      Os dados são expandidos a partir de arrays JSON para facilitar a análise.
    meta:
      tags:
        - bronze
    columns:
      - name: codigotipo
        description: "Código que representa o tipo do cargo ou função."

      - name: nome
        description: "Nome completo do cargo ou função."

      - name: sigla
        description: "Sigla identificadora do cargo ou função."

      - name: codigocargofuncao
        description: "Código único que identifica o cargo ou função."

      - name: categoria
        description: "Categoria funcional do cargo, como direção, assessoramento, etc."

      - name: nivel
        description: "Nível hierárquico do cargo ou função."

      - name: atonormativo__tipoato
        description: "Tipo do ato normativo que criou ou regulamenta o cargo/função."

      - name: atonormativo__codigounidade
        description: "Código da unidade responsável pelo ato normativo."

      - name: atonormativo__numero
        description: "Número do ato normativo relacionado ao cargo ou função."

      - name: atonormativo__dataassinatura
        description: "Data em que o ato normativo foi assinado."

      - name: atonormativo__datapublicacao
        description: "Data de publicação do ato normativo no diário oficial."

      - name: atonormativo__datavigencia
        description: "Data em que o ato normativo passou a vigorar."

      - name: atonormativo__ementa
        description: "Ementa ou resumo descritivo do ato normativo."

      - name: atonormativo__url
        description: "URL de acesso ao conteúdo completo do ato normativo."

      - name: atonormativo__codigotipo
        description: "Código que representa o tipo de ato normativo."

      - name: atonormativo__siglatipo
        description: "Sigla que representa o tipo de ato normativo."

      - name: denominacao_codigo
        description: "Código individual da denominação expandida a partir do array JSON."

      - name: denominacao_descricao
        description: "Descrição da denominação expandida para o cargo/função."


  - name: dados_afastamento
    description: >
      Tabela bronze com dados atuais de afastamentos dos servidores.
    meta:
      tags:
        - bronze
    columns:
      - name: adiantamento_salario_ferias
        description: "Indica se houve adiantamento de salário durante as férias."
      - name: ano_exercicio
        description: "Ano de exercício a que o afastamento se refere."
      - name: cod_diploma_afastamento
        description: "Código do diploma legal do afastamento."
      - name: cod_ocorrencia
        description: "Código da ocorrência do afastamento."
      - name: desc_diploma_afastamento
        description: "Descrição do diploma legal do afastamento."
      - name: desc_ocorrencia
        description: "Descrição da ocorrência do afastamento."
      - name: dt_fim
        description: "Data de término do afastamento."
      - name: dt_ini
        description: "Data de início do afastamento."
      - name: dt_inicio_aquisicao
        description: "Data inicial do período aquisitivo de férias."
      - name: dt_publicacao_afastamento
        description: "Data de publicação do afastamento."
      - name: dias_restantes
        description: "Dias restantes de afastamento."
      - name: gratificacao_natalina
        description: "Indica se o afastamento está relacionado à gratificação natalina."
      - name: gr_matricula
        description: "Matrícula GR."
      - name: numero_diploma_afastamento
        description: "Número do diploma legal do afastamento."
      - name: numero_parcela
        description: "Número da parcela do afastamento."
      - name: parcela_continuacao_interrupcao
        description: "Indica se a parcela é uma continuação ou interrupção."
      - name: qtde_dias
        description: "Quantidade de dias do afastamento."
      - name: cpf
        description: "CPF do servidor."
      - name: dt_fim_aquisicao
        description: "Data final do período aquisitivo de férias."


  - name: dados_curriculo
    description: >
      Tabela bronze que representa dados curriculares e experiências profissionais dos servidores públicos.
      Inclui informações sobre cursos realizados, instituições de ensino, tempo de experiência, projetos desenvolvidos e vínculos com órgãos ou empresas.
      As datas foram padronizadas para o primeiro dia do mês (`dt_mes_`) e os dados textuais foram limpos de caracteres inválidos.
    meta:
      tags:
        - bronze
    columns:
      - name: cpf
        description: "CPF do servidor, formatado apenas com números."

      - name: ident_unica
        description: "Identificador único do servidor no sistema, usado para correlacionar registros."

      - name: codigo_experiencia
        description: "Código associado ao tipo de experiência do servidor ( 1 para formação, 2 para experiência profissional)."

      - name: cod_curso
        description: "Código do curso realizado, se disponível."

      - name: nome_curso
        description: "Nome do curso de formação acadêmica ou técnica. Exemplo: 'Ciências Contábeis', 'Administração'."

      - name: dt_mes_conclusao
        description: "Data de conclusão do curso, normalizada para o primeiro dia do mês. Exemplo: '1991-12-01'."

      - name: nome_instituicao
        description: "Nome da instituição onde o curso foi realizado. Exemplo: 'UDF', 'Universidade Católica de Brasília'."

      - name: nome_area_experiencia
        description: >
          Grau ou situação da experiência/capacitação. Pode indicar o nível ou status como: 
          'Concluído', 'Intermediário', 'Básico', 'Curso', 'Avançado'."

      - name: carga_horaria
        description: "Carga horária do curso, se disponível. Armazenado como texto."

      - name: nome_cargo
        description: "Nome do cargo ou função exercida durante a experiência profissional."

      - name: dt_mes_inicio
        description: "Data de início da experiência profissional, no formato 'YYYY-MM-01'."

      - name: nome_orgao_empresa
        description: "Nome da organização, empresa ou órgão público em que a experiência foi realizada."

      - name: dt_mes_fim
        description: "Data de término da experiência profissional, normalizada para o primeiro dia do mês."

      - name: descricao_projeto
        description: "Descrição de projetos relevantes associados à experiência."

      - name: informacoes_adicionais
        description: "Informações complementares que detalham a experiência ou formação."

      - name: tipo_descricao
        description: "Tipo da descrição curricular. Pode indicar se o registro refere-se a curso, experiência, projeto etc."


  - name: dados_dependentes
    description: >
      Tabela bronze que contém informações sobre os dependentes dos servidores públicos.
      Inclui grau de parentesco, condições de dependência, benefícios associados e o período em que a dependência esteve ativa.
      Os dados foram tratados para remover valores inválidos como 'NaN' e '00000000', e datas foram convertidas para o formato `DATE`.
    meta:
      tags:
        - bronze
    columns:
      - name: cod_condicao
        description: >
          Código que representa a condição da dependência ( dependente econômico, legal, etc.).
          Usado para classificar o tipo de vínculo do dependente com o servidor.

      - name: cod_grau_parentesco
        description: >
          Código que indica o grau de parentesco do dependente com o servidor ( filho, cônjuge, pai, etc.).

      - name: cod_orgao
        description: "Código do órgão ao qual o servidor está vinculado."

      - name: cpf
        description: "CPF do servidor titular da matrícula, contendo apenas números."

      - name: matricula
        description: "Número da matrícula funcional do servidor ao qual o dependente está associado."

      - name: nome_dependente
        description: "Nome completo do dependente."

      - name: nome_condicao
        description: >
          Descrição da condição do dependente ( 'Dependente para IR', 'Dependente para Plano de Saúde').

      - name: nome_grau_parentesco
        description: >
          Descrição textual do grau de parentesco entre o servidor e o dependente ( 'Filho', 'Cônjuge').

      - name: cod_beneficio
        description: "Código que representa o tipo de benefício relacionado ao dependente, se houver."

      - name: dt_fim
        description: >
          Data de término da condição de dependência, no formato 'DDMMYYYY', convertida para DATE.
          Pode ser nula se a dependência ainda estiver ativa.

      - name: dt_inicio
        description: >
          Data de início da condição de dependência, no formato 'DDMMYYYY', convertida para DATE.

      - name: nome_beneficio
        description: >
          Nome do benefício associado ao dependente ( auxílio-saúde, plano de assistência etc.).


  - name: dados_escolares
    description: >
      Tabela bronze que armazena dados sobre a formação educacional dos servidores públicos.
      Inclui informações sobre escolaridade, titulação e cursos associados às matrículas funcionais.
      Os dados foram limpos para remover valores vazios e o CPF foi padronizado contendo apenas dígitos.
    meta:
      tags:
        - bronze
    columns:
      - name: cod_curso
        description: "Código identificador do curso realizado pelo servidor."

      - name: nome_curso
        description: "Nome do curso relacionado à formação do servidor."

      - name: cod_matricula
        description: "Código da matrícula funcional do servidor, vinculado ao curso."

      - name: cod_orgao
        description: "Código do órgão público ao qual o servidor está vinculado."

      - name: cod_titulacao
        description: "Código que representa a titulação do servidor ( especialização, mestrado, doutorado)."

      - name: nome_titulacao
        description: "Descrição textual da titulação ( 'Mestrado', 'Doutorado')."

      - name: cod_escolaridade
        description: "Código do nível de escolaridade ( ensino médio, superior, técnico)."

      - name: nome_escolaridade
        description: "Descrição do nível de escolaridade do servidor."

      - name: cpf
        description: "CPF do servidor, contendo apenas números, utilizado para identificação única."



  - name: dados_financeiros
    description: >
      Tabela bronze que armazena dados financeiros associados a servidores públicos.
      Contém informações detalhadas sobre rubricas (proventos e descontos), valores pagos,
      períodos de referência e data de pagamento. Os dados passam por limpeza e transformação
      de formatos monetários e temporais para garantir consistência e padronização.
    meta:
      tags:
        - bronze
    columns:
      - name: cod_rubrica
        description: "Código da rubrica financeira (provento ou desconto) referente ao pagamento do servidor."

      - name: indicador_rd
        description: "Indicador que diferencia se a rubrica é de receita (R) ou despesa (D)."

      - name: nome_rubrica
        description: "Nome descritivo da rubrica, como 'Salário Base', 'Auxílio Alimentação', etc."

      - name: numero_sequencia
        description: "Número sequencial que identifica a ordem da rubrica na folha de pagamento."

      - name: valor_rubrica
        description: >
          Valor monetário da rubrica, convertido de string para tipo numérico. 
          Foi realizada limpeza dos pontos e substituição da vírgula decimal por ponto.

      - name: data_anomes_rubrica
        description: >
          Data correspondente ao mês e ano de referência da rubrica, convertida do formato textual ( 'JAN2020') para uma data no formato YYYY-MM-DD
          com o dia fixado em 01.

      - name: prazo_rubrica
        description: "Informação de prazo da rubrica (campo opcional e com dados variados, pode indicar vencimento ou parcelamento)."

      - name: mes_ano_pagamento
        description: >
          Data correspondente ao mês e ano de efetivação do pagamento, convertida do formato textual ( 'JAN2020') para data com o dia fixado em 01.

      - name: cpf
        description: >
          CPF do servidor, padronizado contendo apenas dígitos. Utilizado para vinculação com outras informações do servidor.

      - name: indicador_mov_supl
        description: >
          Indicador que mostra se a movimentação financeira se refere a um pagamento suplementar ou retroativo (campo técnico da folha).

      - name: periodo_rubrica
        description: >
          Período a que se refere a rubrica, podendo representar um agrupamento ou classificação contábil adicional."


  - name: dados_funcionais
    description: >
      Tabela bronze que armazena os dados funcionais dos servidores, contendo informações
      sobre cargos, funções, regimes jurídicos, ocorrências de ingresso e aposentadoria, e dados
      de unidades organizacionais (lotação e exercício). As datas são padronizadas, os CPFs higienizados
      e os valores tratados para garantir integridade e legibilidade dos dados.
    meta:
      tags:
        - bronze
    columns:
      - name: cod_atividade_funcao
        description: "Código da atividade ou função exercida pelo servidor."

      - name: cod_funcao
        description: "Código identificador da função do servidor."

      - name: cod_jornada
        description: "Código da jornada de trabalho do servidor."

      - name: cod_ocorr_ingresso_orgao
        description: "Código da ocorrência referente ao ingresso no órgão."

      - name: cod_ocorr_ingresso_serv_publico
        description: "Código da ocorrência de ingresso no serviço público federal."

      - name: cod_orgao
        description: "Código do órgão atual de lotação ou exercício do servidor."

      - name: cod_padrao
        description: "Código do padrão do cargo ocupado."

      - name: cod_situacao_funcional
        description: "Código representando a situação funcional atual do servidor (ativo, afastado, etc.)."

      - name: cod_uorg_exercicio
        description: "Código da unidade organizacional onde o servidor exerce suas atividades."

      - name: cod_upag
        description: "Código da Unidade Pagadora responsável pelo pagamento ao servidor."

      - name: cod_orgao_origem
        description: "Código do órgão de origem, em caso de movimentação funcional."

      - name: cpf_chefia_imediata
        description: "CPF da chefia imediata, higienizado para conter apenas dígitos."

      - name: dt_exercicio_no_orgao
        description: "Data em que o servidor iniciou o exercício no órgão atual."

      - name: dt_fim_vale_ar
        description: "Data final da vigência do vale de auxílio-refeição."

      - name: dt_ingresso_funcao
        description: "Data de ingresso na função atual."

      - name: dt_ocorr_ingresso_orgao
        description: "Data da ocorrência de ingresso no órgão atual."

      - name: dt_ocorr_ingresso_serv_publico
        description: "Data da ocorrência de ingresso no serviço público."

      - name: email_chefia_imediata
        description: "E-mail institucional da chefia imediata, padronizado em minúsculo."

      - name: email_institucional
        description: "E-mail institucional do servidor, padronizado em minúsculo."

      - name: email_servidor
        description: "E-mail pessoal do servidor, padronizado em minúsculo."

      - name: ident_unica
        description: "Identificação única do servidor no sistema."

      - name: matricula_siape
        description: "Matrícula do servidor no sistema SIAPE."

      - name: modalidade_pgd
        description: "Modalidade de participação no Programa de Gestão e Desempenho (PGD)."

      - name: nome_atividade_funcao
        description: "Descrição textual da atividade ou função exercida."

      - name: nome_chefe_uorg
        description: "Nome da chefia imediata da unidade organizacional."

      - name: nome_funcao
        description: "Nome da função ocupada."

      - name: nome_jornada
        description: "Descrição da jornada de trabalho."

      - name: nome_ocorr_ingresso_orgao
        description: "Descrição da ocorrência de ingresso no órgão."

      - name: nome_ocorr_ingresso_serv_publico
        description: "Descrição da ocorrência de ingresso no serviço público."

      - name: nome_orgao
        description: "Nome do órgão onde o servidor está vinculado."

      - name: nome_regime_juridico
        description: "Nome do regime jurídico do servidor ( Estatutário, CLT)."

      - name: nome_situacao_funcional
        description: "Descrição da situação funcional do servidor."

      - name: nome_uorg_exercicio
        description: "Nome da unidade organizacional de exercício."

      - name: nome_upag
        description: "Nome da unidade pagadora responsável pelo servidor."

      - name: participa_pgd
        description: "Indica se o servidor participa do Programa de Gestão e Desempenho."

      - name: percentual_ts
        description: "Percentual de tempo de trabalho remoto (teletrabalho), convertido para valor numérico ( 0.75 representa 75%)."

      - name: sigla_orgao
        description: "Sigla do órgão atual."

      - name: sigla_orgao_origem
        description: "Sigla do órgão de origem."

      - name: sigla_regime_juridico
        description: "Sigla do regime jurídico do servidor."

      - name: sigla_uorg_exercicio
        description: "Sigla da unidade de exercício."

      - name: sigla_upag
        description: "Sigla da unidade pagadora."

      - name: cpf
        description: "CPF do servidor, com apenas dígitos."

      - name: cod_cargo
        description: "Código do cargo efetivo ocupado pelo servidor."

      - name: cod_classe
        description: "Código da classe funcional do cargo."

      - name: cod_ocorr_aposentadoria
        description: "Código da ocorrência de aposentadoria."

      - name: dt_ini_vale_ar
        description: "Data de início do benefício de auxílio-refeição."

      - name: dt_ocorr_aposentadoria
        description: "Data da ocorrência de aposentadoria."

      - name: nome_cargo
        description: "Nome do cargo efetivo."

      - name: nome_classe
        description: "Nome da classe funcional do cargo."

      - name: nome_ocorr_aposentadoria
        description: "Descrição da ocorrência de aposentadoria."

      - name: sigla_nivel_cargo
        description: "Sigla do nível do cargo ocupado."

      - name: tipo_vale_ar
        description: "Tipo de auxílio-refeição concedido."

      - name: cod_ocorr_isencao_ir
        description: "Código da ocorrência de isenção de imposto de renda."

      - name: dt_ini_ocorr_isencao_ir
        description: "Data de início da ocorrência de isenção de IR."

      - name: nome_ocorr_isencao_ir
        description: "Descrição da ocorrência de isenção de imposto de renda."

      - name: cod_uorg_lotacao
        description: "Código da unidade de lotação do servidor."

      - name: nome_uorg_lotacao
        description: "Nome da unidade de lotação do servidor."

      - name: sigla_uorg_lotacao
        description: "Sigla da unidade de lotação do servidor."

      - name: dt_fim_ocorr_isencao_ir
        description: "Data de término da isenção de IR."

      - name: cod_ocorr_exclusao
        description: "Código da ocorrência de exclusão do servidor do sistema."

      - name: dt_ocorr_exclusao
        description: "Data da ocorrência de exclusão do servidor."

      - name: nome_ocorr_exclusao
        description: "Descrição da ocorrência de exclusão do servidor."

      - name: dt_uorg_lotacao
        description: "Data da lotação na unidade organizacional atual."

      - name: cod_vale_transporte
        description: "Código do benefício de vale transporte."

      - name: valor_vale_transporte
        description: "Valor monetário do vale transporte."

      - name: dt_uorg_exercicio
        description: "Data de início do exercício na unidade organizacional atual."

      - name: pontuacao_desempenho
        description: >
          Pontuação atribuída ao servidor conforme avaliação de desempenho. 
          Pode conter letras (A, B, C) ou valores numéricos, depende da origem. Mantido como string.


  - name: dados_pa
    description: >
      Tabela bronze com dados de pensionistas e alimentados.
    meta:
      tags:
        - bronze
    columns:
      - name: agencia_beneficiario
        description: "Agência bancária do beneficiário."
      - name: banco_beneficiario
        description: "Banco do beneficiário."
      - name: cod_orgao
        description: "Código do órgão."
      - name: conta_beneficiario
        description: "Conta bancária do beneficiário."
      - name: cpf_beneficiario
        description: "CPF do beneficiário."
      - name: matricula_servidor
        description: "Matrícula do servidor instituidor da pensão."
      - name: nome_beneficiario
        description: "Nome do beneficiário."
      - name: valor_ultima_pensao
        description: "Valor da última pensão."
      - name: cpf_servidor
        description: "CPF do servidor instituidor da pensão."
      - name: cod_vinculo_servidor
        description: "Código do vínculo com o servidor."
      - name: nome_alimentado
        description: "Nome do alimentado."
      - name: nome_vinculo_servidor
        description: "Nome do vínculo com o servidor."

  - name: dados_pessoais
    description: >
      Tabela bronze com dados pessoais dos servidores.
    meta:
      tags:
        - bronze
    columns:
      - name: cod_cor
        description: "Código da cor/raça."
      - name: cod_estado_civil
        description: "Código do estado civil."
      - name: cod_nacionalidade
        description: "Código da nacionalidade."
      - name: cod_sexo
        description: "Código do sexo."
      - name: dt_nascimento
        description: "Data de nascimento."
      - name: grupo_sanguineo
        description: "Grupo sanguíneo."
      - name: nome_pessoa
        description: "Nome da pessoa."
      - name: nome_cor
        description: "Nome da cor/raça."
      - name: nome_estado_civil
        description: "Nome do estado civil."
      - name: nome_mae
        description: "Nome da mãe."
      - name: nome_municipio_nascimento
        description: "Nome do município de nascimento."
      - name: nome_nacionalidade
        description: "Nome da nacionalidade."
      - name: nome_pai
        description: "Nome do pai."
      - name: nome_sexo
        description: "Nome do sexo."
      - name: num_pispasep
        description: "Número do PIS/PASEP."
      - name: uf_nascimento
        description: "UF de nascimento."
      - name: cpf
        description: "CPF do servidor."
      - name: cod_deficiencia_fisica
        description: "Código de deficiência física."
      - name: nome_deficiencia_fisica
        description: "Nome da deficiência física."
      - name: dt_chegada_brasil
        description: "Data de chegada ao Brasil."
      - name: nome_pais_origem
        description: "Nome do país de origem."

  - name: dados_uorg
    description: >
      Tabela bronze com dados das Unidades Organizacionais (UORGs).
    meta:
      tags:
        - bronze
    columns:
      - name: bairro_uorg
        description: "Bairro da UORG."
      - name: cep_uorg
        description: "CEP da UORG."
      - name: codigo_matricula
        description: "Código de matrícula."
      - name: codigo_municipio_uorg
        description: "Código do município da UORG."
      - name: codigo_orgao
        description: "Código do órgão."
      - name: codigo_orgao_uorg
        description: "Código da UORG no órgão."
      - name: email_uorg
        description: "Email da UORG."
      - name: tipo_endereco_uorg
        description: "Tipo de endereço da UORG."
      - name: logradouro_uorg
        description: "Logradouro da UORG."
      - name: nome_municipio_uorg
        description: "Nome do município da UORG."
      - name: nome_uorg
        description: "Nome da UORG."
      - name: telefone_uorg
        description: "Telefone da UORG."
      - name: numero_endereco_uorg
        description: "Número do endereço da UORG."
      - name: sigla_uorg
        description: "Sigla da UORG."
      - name: uf_uorg
        description: "UF da UORG."
      - name: cpf
        description: "CPF associado à UORG."
      - name: complemento_endereco_uorg
        description: "Complemento do endereço da UORG."
      - name: fax_uorg
        description: "Fax da UORG."


  - name: estrutura_organizacional_cargos
    description: >
      Tabela gold contendo a estrutura organizacional de unidades com informações expandidas de cargos e instâncias.
      Os dados foram transformados para extrair e normalizar os campos aninhados no JSON armazenado na coluna `cargos`.
      A tabela inclui apenas uma instância por código, priorizando a de maior ordem de grandeza.
    meta:
      tags:
        - bronze
    columns:
      - name: codigounidade
        description: Código da unidade organizacional.
      - name: nomeunidade
        description: Nome completo da unidade organizacional.
      - name: siglaunidade
        description: Sigla da unidade organizacional.
      - name: municipio
        description: Município onde a unidade está localizada.
      - name: uf
        description: Unidade federativa (UF) correspondente ao município.
      - name: denominacao
        description: Denominação do cargo.
      - name: funcao
        description: Função associada à denominação do cargo.
      - name: codigo_instancia
        description: Código da instância do cargo na estrutura.
      - name: nome_titular
        description: Nome do servidor titular do cargo.
      - name: cpf_titular
        description: CPF do servidor titular do cargo (com apenas dígitos numéricos).
      - name: ordem_grandeza
        description: Nível hierárquico da unidade na estrutura, utilizado para escolher a instância mais relevante.


  - name: lista_servidores
    description: >
      Tabela bronze com a lista de servidores e suas UORGs.
    meta:
      tags:
        - bronze
    columns:
      - name: cod_uorg
        description: "Código da UORG."
      - name: dt_ultima_transacao
        description: "Data da última transação."
      - name: cpf
        description: "CPF do servidor."

  - name: lista_uorgs
    description: >
      Tabela bronze com a lista de UORGs.
    meta:
      tags:
        - bronze
    columns:
      - name: codigo
        description: "Código da UORG."
      - name: dt_ultima_transacao
        description: "Data da última transação."
      - name: nome
        description: "Nome da UORG."


  - name: terceirizados
    description: >
      Tabela gold contendo informações de trabalhadores terceirizados oriundos do sistema ComprasGov.
      Inclui dados relacionados ao contrato, função, jornada, remuneração e benefícios, com tratamento de campos textuais e numéricos para padronização.
    meta:
      tags:
        - bronze
    columns:
      - name: id
        description: Identificador único do registro do trabalhador terceirizado.
      - name: contrato_id
        description: Identificador do contrato ao qual o trabalhador está vinculado.
      - name: cpf
        description: CPF do trabalhador, extraído da string `usuario`.
      - name: nome
        description: Nome do trabalhador, extraído da string `usuario`.
      - name: funcao_id
        description: Identificador da função exercida pelo trabalhador.
      - name: descricao_complementar
        description: Descrição complementar da função ou atividade do trabalhador.
      - name: jornada
        description: Quantidade de horas de jornada de trabalho semanal do trabalhador (convertido para numérico).
      - name: unidade
        description: Unidade organizacional onde o trabalhador presta serviço.
      - name: salario
        description: Valor do salário mensal do trabalhador (convertido para formato numérico padrão).
      - name: custo
        description: Custo total do trabalhador para a instituição (convertido para formato numérico padrão).
      - name: escolaridade_id
        description: Identificador do grau de escolaridade do trabalhador.
      - name: data_inicio
        description: Data de início do contrato do trabalhador, convertida para formato de data.
      - name: data_fim
        description: Data de término do contrato do trabalhador, convertida para formato de data.
      - name: situacao
        description: Situação atual do vínculo contratual do trabalhador (ativo, encerrado).
      - name: aux_transporte
        description: Valor mensal do auxílio transporte recebido pelo trabalhador (convertido para numérico).
      - name: vale_alimentacao
        description: Valor mensal do vale alimentação recebido pelo trabalhador (convertido para numérico).


  - name: unidade_organizacional
    description: >
      Tabela gold que representa a hierarquia das unidades organizacionais extraídas do sistema Siorg.
      A hierarquia é construída de forma recursiva, partindo de uma unidade raiz definida manualmente.
      A tabela traz dados estruturados sobre as unidades, seus vínculos parentais e o nível de profundidade hierárquica.
    meta:
      tags:
        - bronze
    columns:
      - name: codigounidade
        description: Código da unidade organizacional (sem prefixos de URI).
      - name: codigounidadepai
        description: Código da unidade organizacional pai, representando a hierarquia entre unidades.
      - name: codigoorgaoentidade
        description: Código do órgão ou entidade ao qual a unidade pertence.
      - name: codigotipounidade
        description: Código do tipo da unidade organizacional (departamento, secretaria).
      - name: nome
        description: Nome completo da unidade organizacional.
      - name: sigla
        description: Sigla da unidade organizacional.
      - name: codigoesfera
        description: Código da esfera governamental (federal, estadual, municipal).
      - name: codigopoder
        description: Código do poder ao qual a unidade está vinculada (Executivo, Judiciário).
      - name: codigonaturezajuridica
        description: Código da natureza jurídica da unidade.
      - name: codigosubnaturezajuridica
        description: Código da subnatureza jurídica da unidade.
      - name: nivelnormatizacao
        description: Nível de normatização da unidade organizacional.
      - name: versaoconsulta
        description: Número da versão da consulta no momento da extração dos dados.
      - name: datafinalversaoconsulta
        description: Data de finalização da versão da consulta.
      - name: operacao
        description: Tipo de operação registrada (inclusão, alteração, exclusão).
      - name: codigounidadepaianterior
        description: Código da unidade pai anterior (em caso de alteração estrutural).
      - name: codigoorgaoentidadeanterior
        description: Código do órgão/entidade anterior da unidade (em caso de mudança).
      - name: ordem_grandeza
        description: Nível hierárquico da unidade dentro da estrutura organizacional (quanto maior, mais profunda).
      - name: caminho_unidade
        description: Caminho hierárquico concatenado das siglas das unidades até o nível atual.


  # Silver
  - name: afastamento_consolidado
    description: >
      Tabela gold que consolida os registros de afastamento dos servidores, integrando as fontes 
      `dados_afastamento` e `afastamento_historico`, com enriquecimento de informações vindas de 
      `dados_pessoais` (nome do servidor) e `dados_funcionais` (função e unidade de exercício).
      O processo inclui deduplicação inteligente priorizando os registros mais confiáveis, 
      utilizando lógica de ranking e partição por CPF e data de início do afastamento.
    meta:
      tags:
        - silver
    columns:
      - name: adiantamento_salario_ferias
        description: Indica se houve adiantamento de salário junto às férias no período do afastamento.
      - name: ano_exercicio
        description: Ano de exercício a que o afastamento se refere.
      - name: dt_fim
        description: Data de término do afastamento.
      - name: dt_fim_aquisicao
        description: Data final do período aquisitivo das férias relacionadas ao afastamento.
      - name: dt_ini
        description: Data de início do afastamento.
      - name: dt_inicio_aquisicao
        description: Data inicial do período aquisitivo de férias.
      - name: dt_inicio_ferias_interrompidas
        description: Data de início das férias interrompidas, se houver.
      - name: dias_restantes
        description: Quantidade de dias restantes de férias ou afastamento.
      - name: gratificacao_natalina
        description: Indica se houve gratificação natalina no período do afastamento.
      - name: numero_parcela
        description: Número da parcela relacionada ao afastamento.
      - name: parcela_continuacao_interrupcao
        description: Indica se o afastamento é continuação ou interrupção de uma parcela anterior.
      - name: parcela_interrompida
        description: Indica se a parcela foi interrompida.
      - name: qtde_dias
        description: Quantidade total de dias do afastamento.
      - name: cpf
        description: CPF do servidor.
      - name: cod_diploma_afastamento
        description: Código do diploma legal que ampara o afastamento.
      - name: cod_ocorrencia
        description: Código da ocorrência de afastamento.
      - name: dt_publicacao_afastamento
        description: Data de publicação do afastamento no diário oficial ou sistema correspondente.
      - name: desc_diploma_afastamento
        description: Descrição textual do diploma legal de afastamento.
      - name: desc_ocorrencia
        description: Descrição da ocorrência relacionada ao afastamento.
      - name: numero_diploma_afastamento
        description: Número do diploma legal do afastamento.
      - name: gr_matricula
        description: Número da matrícula do servidor no sistema GRH, quando disponível.
      - name: origem_dados
        description: Origem do dado de afastamento (`dados_afastamento` ou `afastamento_historico`).
      - name: nome_pessoa
        description: Nome completo do servidor, obtido a partir da tabela de dados pessoais.
      - name: cod_funcao
        description: Código da função de chefia ou cargo de confiança ocupado pelo servidor no momento do afastamento.
      - name: sigla_uorg_exercicio
        description: Sigla da unidade organizacional onde o servidor exercia suas funções.



  - name: quantitativo_alocados_ocupados
    description: >
      Tabela gold que consolida e compara os quantitativos de cargos ocupados e cargos previstos
      em funções de chefia, correlacionando os dados dos sistemas SIAPE e SIORG. A lógica aplica
      uma combinação heurística de códigos de função com base na estrutura dos códigos e siglas
      das unidades organizacionais, com objetivo de identificar inconsistências, sobras ou
      vacâncias entre as vagas disponíveis e as efetivamente ocupadas.
    meta:
      tags:
        - silver
    columns:
      - name: codigo_siape
        description: Código da função do servidor registrado no SIAPE (`cod_funcao`), representando funções ocupadas.
      - name: codigo_siorg
        description: Código da função de chefia conforme registrado no SIORG (`funcao`), representando vagas previstas.
      - name: nomeunidade
        description: Nome da unidade organizacional, obtido da base SIORG ou SIAPE (com prioridade para SIORG).
      - name: siglaunidade
        description: Sigla da unidade organizacional, unificada a partir das duas fontes (com prioridade para SIORG). 
      - name: nome_cargo
        description: Nome ou denominação do cargo/função de chefia, com base em SIORG ou SIAPE.
      - name: qtd_vagas_cargo
        description: Quantidade de vagas previstas para o cargo de chefia na estrutura organizacional (dados do SIORG).
      - name: qtd_vagas_ocupadas
        description: Quantidade de cargos de chefia efetivamente ocupados, com base nos registros de servidores no SIAPE.
      - name: qtd_cargos_vagos
        description: >
          Diferença entre o número de vagas previstas (`qtd_vagas_cargo`) e as ocupadas (`qtd_vagas_ocupadas`).
          Indica o total de cargos vagos. Retorna `null` se a quantidade de vagas previstas não estiver disponível.


  - name: servidores_detalhados
    description: >
      Tabela gold que consolida dados pessoais, funcionais, educacionais e organizacionais dos servidores.
      Integra informações de múltiplas fontes do SIAPE, combinando registros de identificação, vínculo funcional,
      escolaridade, endereço da unidade de exercício e metadados de transações. Essa visão é útil para análises
      completas do perfil dos servidores ativos e inativos, permitindo estudos sociodemográficos, funcionais e
      institucionais detalhados.
    meta:
      tags:
        - silver
    columns:
      # Dados pessoais
      - name: cpf
        description: CPF do servidor, utilizado como chave primária de junção entre as bases.
      - name: nome_pessoa
        description: Nome completo do servidor.
      - name: dt_nascimento
        description: Data de nascimento do servidor.
      - name: nome_cor
        description: Cor/raça autodeclarada do servidor.
      - name: nome_estado_civil
        description: Estado civil declarado.
      - name: nome_mae
        description: Nome da mãe do servidor.
      - name: nome_pai
        description: Nome do pai do servidor.
      - name: nome_municipio_nascimento
        description: Município de nascimento do servidor.
      - name: nome_nacionalidade
        description: Nacionalidade declarada.
      - name: nome_sexo
        description: Sexo/gênero do servidor.

      # Dados funcionais
      - name: matricula_siape
        description: Matrícula SIAPE do servidor.
      - name: nome_funcao
        description: Nome da função de chefia ou cargo comissionado exercido, se houver.
      - name: cod_funcao
        description: Código da função exercida.
      - name: nome_cargo
        description: Nome do cargo efetivo.
      - name: cod_cargo
        description: Código do cargo efetivo.
      - name: nome_jornada
        description: Jornada de trabalho do servidor.
      - name: dt_ingresso_funcao
        description: Data de ingresso na função atual.
      - name: nome_regime_juridico
        description: Regime jurídico do vínculo funcional.
      - name: nome_situacao_funcional
        description: Situação funcional (ativo, cedido, aposentado etc).
      - name: participa_pgd
        description: Indica se o servidor participa do Programa de Gestão (teletrabalho).

      # Escolaridade e titulação
      - name: nome_escolaridade_principal
        description: Nível de escolaridade mais elevado do servidor.
      - name: nome_titulacao_principal
        description: Título acadêmico mais elevado do servidor ( mestrado, doutorado).

      # Unidade organizacional
      - name: nome_uorg_exercicio
        description: Nome da unidade organizacional onde o servidor exerce atualmente.
      - name: sigla_uorg_exercicio
        description: Sigla da unidade de exercício.
      - name: nome_uorg_lotacao
        description: Nome da unidade de lotação original.
      - name: sigla_uorg_lotacao
        description: Sigla da unidade de lotação.
      - name: nome_orgao_funcional
        description: Nome do órgão funcional ao qual o servidor está vinculado.
      - name: sigla_orgao_funcional
        description: Sigla do órgão funcional.

      # Endereço da unidade
      - name: logradouro_uorg
        description: Nome do logradouro da unidade.
      - name: numero_endereco_uorg
        description: Número do endereço da unidade.
      - name: complemento_endereco_uorg
        description: Complemento do endereço.
      - name: bairro_uorg
        description: Bairro onde a unidade está localizada.
      - name: cep_uorg
        description: CEP da unidade.
      - name: nome_municipio_uorg
        description: Município da unidade.
      - name: uf_uorg
        description: Unidade federativa da unidade.

      # Contatos institucionais
      - name: email_institucional
        description: Email institucional do servidor.
      - name: email_servidor
        description: Email alternativo do servidor.
      - name: email_chefia_imediata
        description: Email da chefia imediata.
      - name: telefone_uorg
        description: Telefone da unidade de exercício.
      - name: fax_uorg
        description: Fax da unidade de exercício.

      # Metadados e auditoria
      - name: ident_unica_funcional
        description: Identificador único funcional, usado para rastreamento interno.
      - name: dt_ultima_transacao_servidor
        description: Data da última transação registrada no sistema para o servidor.

      # Informações complementares
      - name: cod_ocorr_aposentadoria
        description: Código da ocorrência de aposentadoria (se houver).
      - name: dt_ocorr_aposentadoria
        description: Data da aposentadoria.
      - name: cod_vale_transporte
        description: Código do vale transporte.
      - name: valor_vale_transporte
        description: Valor mensal do vale transporte recebido.
      - name: pontuacao_desempenho
        description: Pontuação de desempenho do servidor, se aplicável.




  - name: tabela_correlacao_cargos
    description: >
      Tabela final que correlaciona cargos entre os sistemas SIAPE e SIORG, utilizando 
      combinações de códigos e unidades organizacionais. Cada linha representa um servidor 
      com informações enriquecidas da função e da chefia, além da hierarquia do cargo e 
      dados pessoais básicos. Essa tabela é útil para analisar discrepâncias, estruturar 
      a hierarquia funcional e verificar se as funções atribuídas no SIAPE estão 
      corretamente refletidas no SIORG.

    meta:
      tags:
        - silver
    columns:
      - name: codigo_siape
        description: Código da função no SIAPE.
      - name: codigo_siorg
        description: Código da função no SIORG.
      - name: codigo_combinacao_siape
        description: Código combinado utilizado para comparar cargos no SIAPE.
      - name: codigo_combinacao_siorg
        description: Código combinado utilizado para comparar cargos no SIORG.
      - name: matricula_siape
        description: Matrícula do servidor no sistema SIAPE.
      - name: cpf
        description: CPF do servidor titular do cargo.
      - name: cpf_chefia_imediata
        description: CPF da chefia imediata do servidor.
      - name: cod_situacao_funcional
        description: Código da situação funcional do servidor no SIAPE.
      - name: nome_situacao_funcional
        description: Descrição da situação funcional.
      - name: hierarquia_cargo
        description: Valor numérico que representa a posição hierárquica do cargo. Quanto menor, mais alto o cargo.
      - name: servidor
        description: Nome do servidor titular do cargo.
      - name: dt_nascimento
        description: Data de nascimento do servidor.
      - name: nome_sexo
        description: Sexo do servidor.
      - name: nome_estado_civil
        description: Estado civil do servidor.
      - name: nome_nacionalidade
        description: Nacionalidade do servidor.
      - name: nome_cor
        description: Cor/raça autodeclarada pelo servidor.
      - name: uf_nascimento
        description: Unidade Federativa (UF) de nascimento.
      - name: nome_municipio_nascimento
        description: Município de nascimento do servidor.
      - name: nome_chefia
        description: Nome da chefia imediata, obtido pelo CPF da chefia.
      - name: codigounidade
        description: Código da unidade organizacional onde o cargo está lotado.
      - name: codigounidadepai
        description: Código da unidade organizacional imediatamente superior.
      - name: caminho_unidade
        description: Caminho hierárquico da unidade organizacional, representando sua posição na estrutura.
      - name: ordem_grandeza
        description: Nível de profundidade da unidade na hierarquia institucional.
      - name: nomeunidade
        description: Nome da unidade organizacional.
      - name: siglaunidade
        description: Sigla da unidade organizacional.
      - name: nome_cargo
        description: Denominação do cargo ocupado, conforme SIAPE ou SIORG.
      - name: servidores_carreira
        description: Classificação se o cargo é de carreira ou nomeação livre.


  - name: unidades_organizacionais_siorg_siape
    description: >
      Tabela que correlaciona as unidades organizacionais do SIAPE e do SIORG,
      com base na correspondência entre os códigos e siglas das unidades. 
      Essa tabela é utilizada para identificar quais unidades estão presentes 
      em ambos os sistemas, apenas no SIAPE ou apenas no SIORG.

    meta:
      tags:
        - silver
    columns:
      - name: nome_unidade
        description: Nome da unidade organizacional, proveniente do SIAPE ou SIORG.
      - name: sigla_uorg
        description: Sigla da unidade organizacional. Pode vir do SIAPE (dados_uorg) ou do SIORG (unidade_organizacional).
      - name: codigo_unidade_siape
        description: Código da unidade organizacional segundo o SIAPE (extraído de dados_uorg).
      - name: codigo_unidade_siorg
        description: Código da unidade organizacional segundo o SIORG (coluna codigounidade).
      - name: tipo_correlacao
        description: >
          Tipo de correspondência encontrada entre os sistemas:
          - "ambos": unidade presente no SIAPE e SIORG.
          - "apenas_siorg": presente apenas no SIORG.
          - "apenas_siape": presente apenas no SIAPE.


  # Gold
  - name: aposentadorias_resumo
    description: >
      Tabela de resumo dos servidores aposentados, contendo informações detalhadas
      sobre a data de ingresso no serviço público, data de aposentadoria e tempo
      de serviço público calculado em anos, meses e dias. A granularidade da tabela
      é por CPF, ou seja, cada linha representa um servidor aposentado único.

    meta:
      tags:
        - gold
    columns:
      - name: cpf
        description: Número do CPF do servidor aposentado.
      - name: nome_pessoa
        description: Nome completo do servidor aposentado.
      - name: dt_ocorr_ingresso_serv_publico
        description: Data de ingresso do servidor no serviço público.
      - name: dt_ocorr_aposentadoria
        description: Data de aposentadoria do servidor.
      - name: mes_aposentadoria
        description: Mês da aposentadoria (arredondado para o primeiro dia do mês).
      - name: nome_situacao_funcional
        description: Situação funcional do servidor no momento da aposentadoria.
      - name: nome_ocorr_aposentadoria
        description: Tipo de ocorrência que levou à aposentadoria do servidor.
      - name: nome_cargo
        description: Cargo ocupado pelo servidor no momento da aposentadoria.
      - name: sigla_nivel_cargo
        description: Sigla do nível do cargo ocupado.
      - name: classe_padrao
        description: Classe e padrão do cargo, no formato "classe-padrão".
      - name: age
        description: Diferença completa entre as datas de ingresso e aposentadoria, em formato de intervalo.
      - name: diff_anos
        description: Quantidade de anos entre o ingresso no serviço público e a aposentadoria.
      - name: diff_meses
        description: Quantidade de meses entre o ingresso e a aposentadoria (ignora anos completos).
      - name: diff_dias
        description: Quantidade de dias entre o ingresso e a aposentadoria (ignora anos e meses completos).



  - name: cargos_consolidado
    description: >
      Tabela que consolida informações de cargos ocupados e vagos no serviço público,
      a partir da junção entre os dados do SIAPE (servidores ativos e detalhados) e
      os dados do SIORG (estrutura de cargos disponíveis). Essa junção é feita com
      base no CPF do titular do cargo. Quando os campos do SIAPE estão nulos, o cargo
      provavelmente está vago. A tabela pode ser utilizada para identificar cargos
      vagos por unidade organizacional.

    meta:
      tags:
        - gold
    columns:
      - name: siorg_cod_unidade
        description: Código da unidade organizacional no SIORG.
      - name: siorg_nome_unidade
        description: Nome da unidade organizacional no SIORG.
      - name: siorg_sigla_unidade
        description: Sigla da unidade organizacional no SIORG.
      - name: siorg_municipio_unidade
        description: Município da unidade organizacional no SIORG.
      - name: siorg_uf_unidade
        description: Unidade federativa (UF) da unidade organizacional no SIORG.
      - name: siorg_denominacao_cargo
        description: Denominação do cargo conforme registrado no SIORG.
      - name: siorg_funcao
        description: Função comissionada associada ao cargo no SIORG.
      - name: siorg_cod_instancia_cargo
        description: Código da instância do cargo no SIORG.
      - name: siorg_cpf_titular
        description: CPF do titular do cargo segundo o SIORG.
      - name: siorg_nome_titular
        description: Nome do titular do cargo segundo o SIORG.

      - name: siape_cpf
        description: CPF do servidor conforme os dados do SIAPE.
      - name: siape_nome_pessoa
        description: Nome completo do servidor no SIAPE.
      - name: siape_nome_cargo_efetivo
        description: Nome do cargo efetivo ocupado pelo servidor no SIAPE.
      - name: siape_nome_funcao_comissionada
        description: Nome da função comissionada ocupada pelo servidor no SIAPE.
      - name: siape_cod_uorg
        description: Código da unidade de exercício do servidor no SIAPE.
      - name: siape_nome_uorg
        description: Nome da unidade de exercício do servidor no SIAPE.
      - name: siape_sigla_uorg
        description: Sigla da unidade de exercício do servidor no SIAPE.
      - name: siape_uf_uorg
        description: Unidade federativa (UF) da unidade de exercício no SIAPE.
      - name: siape_situacao_funcional
        description: Situação funcional atual do servidor segundo o SIAPE.



  - name: hierarquia
    description: >
      Tabela que correlaciona dados do SIAPE (dados funcionais e pessoais dos servidores)
      com a estrutura organizacional do SIORG, atribuindo uma métrica de hierarquia aos cargos
      com base na codificação da função. A hierarquia é determinada por uma fórmula baseada
      na categoria e no nível do cargo. A tabela também indica se o cargo é de carreira ou de
      nomeação livre, além de consolidar informações sobre o servidor e sua chefia imediata.

    meta:
      tags:
        - gold
    columns:
      - name: codigo_siape
        description: Código da função no SIAPE.
      - name: codigo_siorg
        description: Código da função no SIORG, com espaços removidos.
      - name: codigo_combinacao_siape
        description: Código combinado derivado da função no SIAPE, usado para correlação.
      - name: codigo_combinacao_siorg
        description: Código combinado derivado da função no SIORG, usado para correlação.
      - name: matricula_siape
        description: Matrícula funcional do servidor no SIAPE.
      - name: cpf
        description: CPF do servidor.
      - name: cpf_chefia_imediata
        description: CPF da chefia imediata do servidor.
      - name: cod_situacao_funcional
        description: Código da situação funcional do servidor.
      - name: nome_situacao_funcional
        description: Descrição da situação funcional do servidor.
      - name: hierarquia_cargo
        description: Indicador numérico da hierarquia do cargo (quanto menor, maior o cargo).
      - name: servidor
        description: Nome do servidor ocupante do cargo.
      - name: dt_nascimento
        description: Data de nascimento do servidor.
      - name: nome_sexo
        description: Sexo do servidor.
      - name: nome_estado_civil
        description: Estado civil do servidor.
      - name: nome_nacionalidade
        description: Nacionalidade do servidor.
      - name: nome_cor
        description: Cor/raça do servidor.
      - name: uf_nascimento
        description: Unidade federativa de nascimento do servidor.
      - name: nome_municipio_nascimento
        description: Município de nascimento do servidor.
      - name: nome_chefia
        description: Nome da chefia imediata do servidor.
      - name: codigounidade
        description: Código da unidade organizacional associada ao cargo.
      - name: codigounidadepai
        description: Código da unidade organizacional pai (superior).
      - name: caminho_unidade
        description: Caminho hierárquico completo da unidade.
      - name: ordem_grandeza
        description: Nível hierárquico da unidade na estrutura organizacional.
      - name: nomeunidade
        description: Nome da unidade organizacional.
      - name: siglaunidade
        description: Sigla da unidade organizacional.
      - name: nome_cargo
        description: Nome ou denominação do cargo ocupado.
      - name: servidores_carreira
        description: Indica se o servidor está em cargo de carreira ou em nomeação livre.


  - name: resumo_quadro_pessoal
    description: >
      Tabela resumo com a distribuição dos servidores públicos por cargo efetivo, gênero,
      situação funcional e unidade federativa da unidade de exercício (UF). A granularidade é agregada,
      e cada linha representa uma combinação única desses atributos, com a respectiva contagem de servidores.

    meta:
      tags:
        - gold
    columns:
      - name: cargo_efetivo
        description: >
          Nome do cargo efetivo ocupado pelo servidor. Caso não informado, é preenchido com 'N/A'.
      - name: genero
        description: >
          Gênero do servidor (masculino, feminino ou outro), conforme informado no cadastro pessoal.
          Em casos de ausência de informação, é preenchido com 'N/A'.
      - name: situacao_funcional
        description: >
          Situação funcional atual do servidor ( Ativo, Aposentado, Cedido, etc).
          Valores ausentes são substituídos por 'N/A'.
      - name: localidade_uf
        description: >
          Unidade Federativa (UF) da unidade organizacional onde o servidor exerce suas funções.
          Valores ausentes são preenchidos com 'N/A'.
      - name: quantidade_servidores
        description: >
          Quantidade total de servidores distintos (com base no CPF) que se enquadram na combinação dos atributos anteriores.


macros:
  - name: create_udfs
    description: >
      Função que cria as UDFs necessárias para o funcionamento do projeto.
      Essa função deve ser chamada no início de cada run para garantir que todas as UDFs estejam disponíveis.
  
  - name: generate_schema_name
    description: >
      Função que gera o nome do schema a ser utilizado no projeto.
      A função dentro desta macro é built-in do dbt.
  
  ## UDFS
  - name: create_f_parse_dates
    description: >
      Função que cria a UDF f_parse_dates, que é utilizada para converter texto no formato MÊS(texto)/ANO(numero) em datas.
    arguments:
      - name: in_text
        type: text
        description: >
          Texto a ser convertido em data.
          O texto deve estar no formato MÊS(texto)/ANO(numero). Ex.: FEV/2024 -> 2024-02-01










